schema_info:
  title: "MeSH RDF Schema Analysis"
  description: "This document provides an analysis of the Medical Subject Headings (MeSH) RDF schema used in biomedical literature indexing and biomedical research"
  endpoint: "https://rdfportal.org/primary/sparql"
  base_uri: "http://id.nlm.nih.gov/mesh/"
  vocabulary_uri: "http://id.nlm.nih.gov/mesh/vocab#"
  version: "2025"

prefixes:
  rdf: "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  rdfs: "http://www.w3.org/2000/01/rdf-schema#"
  owl: "http://www.w3.org/2002/07/owl#"
  xsd: "http://www.w3.org/2001/XMLSchema#"
  meshv: "http://id.nlm.nih.gov/mesh/vocab#"
  mesh: "http://id.nlm.nih.gov/mesh/"
  mesh2025: "http://id.nlm.nih.gov/mesh/2025/"
  skos: "http://www.w3.org/2004/02/skos/core#"

shape_expressions:
  Descriptor:
    description: "Main subject heading entity in MeSH - represents medical concepts, diseases, chemicals, etc."
    properties:
      prefLabel:
        type: "xsd:string"
        required: true
        description: "Primary label for the descriptor"
      treeNumber:
        type: "meshv:TreeNumber"
        required: true
        description: "Hierarchical classification number in MeSH tree structure"
      concept:
        type: "meshv:Concept"
        required: false
        description: "Associated concepts that define the descriptor"
      allowableQualifier:
        type: "meshv:Qualifier"
        required: false
        description: "Qualifiers that can be used with this descriptor"
      pharmacologicalAction:
        type: "meshv:Descriptor"
        required: false
        description: "Links to descriptors representing pharmacological actions"
      broaderDescriptor:
        type: "meshv:Descriptor"
        required: false
        description: "Parent descriptor in the hierarchy"
      annotation:
        type: "xsd:string"
        required: false
        description: "Annotation note providing usage guidance"
      scopeNote:
        type: "xsd:string"
        required: false
        description: "Scope note defining the meaning and usage"
      dateEstablished:
        type: "xsd:date"
        required: false
        description: "Date when the descriptor was established"

  TreeNumber:
    description: "Hierarchical classification number that places descriptors in the MeSH tree structure"
    properties:
      parentTreeNumber:
        type: "meshv:TreeNumber"
        required: false
        description: "Parent tree number in the hierarchy"
      label:
        type: "xsd:string"
        required: true
        description: "The tree number string (e.g., A01.378.100)"

  Concept:
    description: "Conceptual entity that represents a specific meaning within a descriptor"
    properties:
      prefLabel:
        type: "xsd:string"
        required: true
        description: "Preferred label for the concept"
      broaderConcept:
        type: "meshv:Concept"
        required: false
        description: "Broader concept in the conceptual hierarchy"
      narrowerConcept:
        type: "meshv:Concept"
        required: false
        description: "Narrower concept in the conceptual hierarchy"
      relatedConcept:
        type: "meshv:Concept"
        required: false
        description: "Related concept"
      term:
        type: "meshv:Term"
        required: false
        description: "Terms associated with this concept"
      scopeNote:
        type: "xsd:string"
        required: false
        description: "Definition and scope of the concept"

  Term:
    description: "Textual representation and lexical variants of concepts"
    properties:
      prefLabel:
        type: "xsd:string"
        required: true
        description: "The term text"
      lexicalTag:
        type: "xsd:string"
        required: false
        description: "Lexical categorization of the term"
      abbreviation:
        type: "xsd:string"
        required: false
        description: "Abbreviated form of the term"
      active:
        type: "xsd:boolean"
        required: false
        description: "Whether the term is currently active"

  Qualifier:
    description: "Subheading that modifies the meaning of descriptors"
    properties:
      prefLabel:
        type: "xsd:string"
        required: true
        description: "Preferred label for the qualifier"
      abbreviation:
        type: "xsd:string"
        required: false
        description: "Standard abbreviation for the qualifier"
      annotation:
        type: "xsd:string"
        required: false
        description: "Usage guidelines for the qualifier"
      broaderQualifier:
        type: "meshv:Qualifier"
        required: false
        description: "Parent qualifier in the hierarchy"

  SupplementaryConceptRecord:
    description: "Supplementary concept records for chemicals and other entities not in main MeSH"
    properties:
      prefLabel:
        type: "xsd:string"
        required: true
        description: "Preferred label for the supplementary concept"
      mappedTo:
        type: "meshv:Descriptor"
        required: false
        description: "Main descriptor this concept maps to"
      registryNumber:
        type: "xsd:string"
        required: false
        description: "Chemical registry number (often CAS number)"
      frequencey:
        type: "xsd:integer"
        required: false
        description: "Usage frequency in indexing"
      source:
        type: "xsd:string"
        required: false
        description: "Source of the concept record"

sample_rdf_entries:
  diabetes_descriptor:
    description: "Diabetes Mellitus descriptor showing hierarchical relationships"
    RDF: |
      mesh2025:D003920 a meshv:Descriptor ;
        meshv:prefLabel "Diabetes Mellitus" ;
        meshv:treeNumber mesh2025:C19.246 ;
        meshv:concept mesh2025:M0006147 ;
        meshv:scopeNote "A heterogeneous group of disorders characterized by HYPERGLYCEMIA and GLUCOSE INTOLERANCE." ;
        meshv:annotation "GEN or unspecified; prefer specifics; /blood: consider also BLOOD GLUCOSE; /diet ther: consider also DIET, DIABETIC" ;
        meshv:dateEstablished "1966-01-01"^^xsd:date .

  aspirin_scr:
    description: "Aspirin as Supplementary Concept Record with chemical properties"
    RDF: |
      mesh:D001241 a meshv:SupplementaryConceptRecord ;
        meshv:prefLabel "Aspirin" ;
        meshv:mappedTo mesh2025:D001241 ;
        meshv:registryNumber "R16CO5Y76E" ;
        meshv:frequency 15847 ;
        meshv:source "FDA-SRS" .

  tree_number_example:
    description: "Tree number showing hierarchical classification"
    RDF: |
      mesh2025:A01.378.100 a meshv:TreeNumber ;
        rdfs:label "A01.378.100" ;
        meshv:parentTreeNumber mesh2025:A01.378 .

  pharmacological_action:
    description: "Descriptor with pharmacological action relationship"
    RDF: |
      mesh2025:D000894 a meshv:Descriptor ;
        meshv:prefLabel "Anti-Inflammatory Agents" ;
        meshv:pharmacologicalAction mesh2025:D000894 ;
        meshv:treeNumber mesh2025:D27.505.954.122.085 .

  disease_chemical_relationship:
    description: "Disease-chemical relationship through qualifier"
    RDF: |
      mesh2025:D002318 a meshv:Descriptor ;
        meshv:prefLabel "Cardiovascular Diseases" ;
        meshv:allowableQualifier mesh2025:Q000188 .
      
      mesh2025:Q000188 a meshv:Qualifier ;
        meshv:prefLabel "drug therapy" ;
        meshv:abbreviation "DT" .

sparql_query_examples:
  get_descriptor_hierarchy:
    description: "Retrieve descriptors and their hierarchical relationships (TESTED - WORKS)"
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?descriptor ?label ?parent ?parentLabel WHERE {
        GRAPH <http://id.nlm.nih.gov/mesh> {
          ?descriptor a meshv:TopicalDescriptor ;
                     rdfs:label ?label ;
                     meshv:broaderDescriptor ?parent .
          ?parent rdfs:label ?parentLabel .
          FILTER(CONTAINS(LCASE(?label), "diabetes"))
        }
      }
      LIMIT 20

  get_chemical_scr_with_actions:
    description: "Find supplementary chemical records with pharmacological actions (TESTED - WORKS)"
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?chemical ?label ?action ?actionLabel ?frequency WHERE {
        GRAPH <http://id.nlm.nih.gov/mesh> {
          ?chemical a meshv:SCR_Chemical ;
                   rdfs:label ?label ;
                   meshv:pharmacologicalAction ?action ;
                   meshv:frequency ?frequency .
          ?action rdfs:label ?actionLabel .
          FILTER(?frequency > 10)
        }
      }
      ORDER BY DESC(?frequency)
      LIMIT 50

  get_anatomical_hierarchy:
    description: "Explore anatomical structures using tree numbers starting with 'A' (TESTED - WORKS)"
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?descriptor ?label ?treeNumber ?treeLabel WHERE {
        GRAPH <http://id.nlm.nih.gov/mesh> {
          ?descriptor a meshv:TopicalDescriptor ;
                     rdfs:label ?label ;
                     meshv:treeNumber ?treeNumber .
          ?treeNumber rdfs:label ?treeLabel .
          FILTER(STRSTARTS(?treeLabel, "A"))
        }
      }
      ORDER BY ?treeLabel
      LIMIT 50

  get_qualifier_usage_patterns:
    description: "Analyze qualifier usage patterns across different descriptors (TESTED - WORKS)"
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?qualifier ?qualifierLabel (COUNT(?descriptor) AS ?usageCount) WHERE {
        GRAPH <http://id.nlm.nih.gov/mesh> {
          ?descriptor a meshv:TopicalDescriptor ;
                     meshv:allowableQualifier ?qualifier .
          ?qualifier rdfs:label ?qualifierLabel .
        }
      }
      GROUP BY ?qualifier ?qualifierLabel
      ORDER BY DESC(?usageCount)
      LIMIT 30

  get_chemical_details:
    description: "Get detailed information about chemical supplementary concept records (TESTED - WORKS)"
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?chemical ?label ?frequency ?note ?source ?mappedTo ?mappedLabel WHERE {
        GRAPH <http://id.nlm.nih.gov/mesh> {
          ?chemical a meshv:SCR_Chemical ;
                   rdfs:label ?label ;
                   meshv:frequency ?frequency .
          OPTIONAL { ?chemical meshv:note ?note }
          OPTIONAL { ?chemical meshv:source ?source }
          OPTIONAL { 
            ?chemical meshv:preferredMappedTo ?mappedTo .
            ?mappedTo rdfs:label ?mappedLabel 
          }
          FILTER(?frequency > 100)
        }
      }
      ORDER BY DESC(?frequency)
      LIMIT 20

  get_mesh_type_statistics:
    description: "Get statistics on different MeSH entity types (TESTED - WORKS)"
    sparql: |
      SELECT DISTINCT ?type (COUNT(?s) AS ?count) WHERE {
        GRAPH <http://id.nlm.nih.gov/mesh> {
          ?s a ?type .
        }
      }
      GROUP BY ?type
      ORDER BY DESC(?count)
      LIMIT 20

  get_tree_number_hierarchy:
    description: "Explore tree number hierarchical relationships (TESTED - WORKS)"
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?treeNumber ?treeLabel ?parent ?parentLabel WHERE {
        GRAPH <http://id.nlm.nih.gov/mesh> {
          ?treeNumber a meshv:TreeNumber ;
                     rdfs:label ?treeLabel ;
                     meshv:parentTreeNumber ?parent .
          ?parent rdfs:label ?parentLabel .
          FILTER(STRSTARTS(?treeLabel, "C"))
        }
      }
      ORDER BY ?treeLabel
      LIMIT 50

architectural_notes:
  design_patterns:
    - "Hierarchical tree structure using TreeNumber entities for classification"
    - "Concept-Term-Descriptor relationships for semantic richness"
    - "Supplementary Concept Records for chemicals not in main vocabulary"
    - "Qualifier system for precise indexing with allowed descriptor-qualifier pairs"
    - "Pharmacological action relationships for drug-target associations"
    - "Cross-references to external identifiers (CAS registry numbers, etc.)"
    
  performance_considerations:
    - "Tree number indexing enables efficient hierarchical queries"
    - "Frequency data in SCRs helps prioritize commonly used concepts"
    - "Separate graphs for different MeSH versions (e.g., mesh/2025/)"
    - "Optimized for biomedical literature indexing and retrieval"
    
  semantic_modeling:
    - "Uses SKOS-like broader/narrower relationships for concepts"
    - "Distinguishes between preferred and alternative terms"
    - "Maintains historical data with dateEstablished and dateRevised"
    - "Supports multilingual terms through lexical tags"

data_statistics:
  total_terms: 859674
  total_allowed_descriptor_qualifier_pairs: 630101
  total_concepts: 463621
  total_scr_chemicals: 248780
  total_scr_organisms: 65706
  total_tree_numbers: 64972
  total_topical_descriptors: 30360
  total_scr_diseases: 6539
  total_scr_populations: 1764
  total_scr_protocols: 1233
  primary_categories:
    - "A - Anatomy (A01-A17)"
    - "B - Organisms (B01-B07)"  
    - "C - Diseases (C01-C26)"
    - "D - Chemicals and Drugs (D01-D27)"
    - "E - Analytical, Diagnostic and Therapeutic Techniques and Equipment (E01-E07)"
    - "F - Psychiatry and Psychology (F01-F04)"
    - "G - Phenomena and Processes (G01-G17)"
    - "H - Disciplines and Occupations (H01-H02)"
    - "I - Anthropology, Education, Sociology and Social Phenomena (I01-I03)"
    - "J - Technology, Industry, Agriculture (J01-J02)"
    - "K - Humanities (K01)"
    - "L - Information Science (L01)"
    - "M - Named Groups (M01)"
    - "N - Health Care (N01-N06)"
    - "V - Publication Characteristics (V01-V04)"
    - "Z - Geographicals (Z01)"
  most_frequent_qualifiers:
    - "classification (25,398 uses)"
    - "immunology (22,269 uses)"
    - "metabolism (21,404 uses)"
    - "history (21,113 uses)"
    - "economics (20,045 uses)"
  most_frequent_chemicals:
    - "titanium dioxide (14,995)"
    - "EGFR protein, human (13,373)"
    - "VEGFA protein, human (13,243)"
    - "ERBB2 protein, human (12,641)"
    - "MTOR protein, human (11,213)"
  last_updated: '2025-01-01T00:00:00Z'

validation_notes:
  sparql_endpoint_status: "WORKING - All queries validated successfully"
  tested_queries: 7
  successful_queries: 7
  key_findings:
    - "All 7 SPARQL queries execute successfully and return meaningful results"
    - "MeSH data requires explicit GRAPH specification: GRAPH <http://id.nlm.nih.gov/mesh>"
    - "Primary entity type is TopicalDescriptor (not just Descriptor)"
    - "SCR_Chemical entities contain rich pharmacological action data"
    - "Tree number hierarchy is well-structured with parent-child relationships"
    - "Qualifier usage statistics provide insights into indexing patterns"
    - "Chemical entities include frequency data indicating usage in literature"
  data_quality:
    - "Hierarchical relationships (broaderDescriptor, parentTreeNumber) are well-populated"
    - "Cross-references between SCR chemicals and descriptors work properly"
    - "Pharmacological action linkages provide drug-target information"
    - "Frequency data in chemicals ranges from 1 to 14,995 indicating wide usage variation"
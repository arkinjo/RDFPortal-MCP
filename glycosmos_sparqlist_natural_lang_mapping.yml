schema_info:
  title: GlyCosmos SPARQList API Natural Language Mapping
  description: |
    This YAML maps GlyCosmos SPARQList APIs to natural language use cases.
    Each API has a description of what it does, the parameters it takes,
    and example mappings from natural language questions to API calls.

general_rules:
  - All APIs use HTTP GET requests.
  - Parameters are passed as query arguments appended to the endpoint.
  - "Example: https://sparqlist.glycosmos.org/sparqlist/api/<api_name>?param=value"
  - Parameter values should be extracted from the natural language question.
  - Most APIs return JSON by default, sometimes with a text alternative.

apis:
  - api_name: glycoepitope_epitope_gtc
    title: Glyco Epitope (get GlyTouCan ID)
    endpoint: https://sparqlist.glycosmos.org/sparqlist/api/glycoepitope_epitope_gtc
    description: |
      Retrieve GlyTouCan IDs associated with a given glycoepitope.
      Requires an `epitopeID` string (e.g., EP####).
    parameters:
      - name: epitopeID
        type: string
        required: true
        description: Glycoepitope identifier (e.g., "EP0007").
    output:
      format: json | text
      fields:
        - glytoucanID: GlyTouCan accession number string (e.g., G00055MO)

  - api_name: gtc_image
    title: Get image data from GlyTouCan
    endpoint: https://sparqlist.glycosmos.org/sparqlist/api/gtc_image
    description: |
      Retrieve glycan structure images from GlyTouCan using a specified accession number.  
      Supports multiple styles, notations, and formats.  
      Returns both an HTML `<img>` tag (for rendering) and a base64-encoded string (for decoding/embedding).
    parameters:
      - name: accession
        type: string
        required: true
        description: GlyTouCan accession number (e.g., G39023AU)
      - name: style
        type: string
        required: false
        default: extended
        description: Image style (e.g., extended)
      - name: notation
        type: string
        required: false
        default: snfg
        description: Symbol notation (cfg, cfg_bw, cfg_uoxf, uoxf, uoxf_color, iupac, snfg)
      - name: format
        type: string
        required: false
        default: svg
        description: Image format (png or svg)
      - name: graph
        type: string
        required: false
        default: http://rdf.glytoucan.org/image
        description: Graph source for image retrieval
    output:
      format: json
      fields:
        - image_tag: Ready-to-use `<img>` HTML tag string
        - image_base64: Base64-encoded string of the image
        
  - api_name: gtc_external_id
    title: External ID from GlyTouCan
    endpoint: https://sparqlist.glycosmos.org/sparqlist/api/gtc_external_id
    description: |
      Retrieve external database cross-references for a given GlyTouCan accession number.  
      Returns mappings to partner databases (KEGG, BCSDB, GlyGen, UniCarb-DB, GlycoEpitope, GlycoChemExplorer, JCGGDB AIST),  
      including database-specific IDs, URLs, and descriptions.
    parameters:
      - name: accNum
        type: string
        required: true
        description: GlyTouCan accession number (e.g., "G39023AU")
    output:
      format: json
      fields:
        - entry_label: Label of the external resource (e.g., KEGG GLYCAN, GlyGen)
        - id: External identifier from the partner database
        - url: Direct URL to the partner database entry
        - from: Source database name
        - description: Description of the partner database
        - partnerurl: Homepage of the partner database

use_cases:
  - question: "What GlyTouCan IDs are associated with epitope EP0009?"
    api: glycoepitope_epitope_gtc
    mapping:
      epitopeID: EP0009

  - question: "Find the GlyTouCan entry for epitope EP0020."
    api: glycoepitope_epitope_gtc
    mapping:
      epitopeID: EP0020

  - question: "List GlyTouCan IDs linked to glycoepitope EP0456."
    api: glycoepitope_epitope_gtc
    mapping:
      epitopeID: EP0456
      
  - question: "Show me the glycan image for GlyTouCan ID G00051MO."
    api: gtc_image
    mapping:
      accession: G00051MO
      style: extended
      notation: snfg
      format: svg

  - question: "Retrieve glycan G00055MO as a PNG in CFG notation."
    api: gtc_image
    mapping:
      accession: G00055MO
      notation: cfg
      format: png

  - question: "Find all external database links for GlyTouCan ID G78706CK."
    api: gtc_external_id
    mapping:
      accNum: G78706CK
  
  - question: "What KEGG and GlyGen cross-references exist for GlyTouCan glycan G10738?"
    api: gtc_external_id
    mapping:
      accNum: G10738

  - question: "Show me the UniCarb-DB and BCSDB entries linked to GlyTouCan accession G00055MO."
    api: gtc_external_id
    mapping:
      accNum: G00055MO
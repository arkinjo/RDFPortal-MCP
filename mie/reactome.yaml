schema_info:
  title: Reactome RDF Schema
  description: |
    Comprehensive biological pathway database using BioPAX Level 3 ontology for standardized representation of biochemical reactions, 
    protein complexes, and molecular interactions. Covers over 2,500 curated pathways with 13,000+ reactions focusing on human biology, 
    with extensive cross-species orthology data. Integrates UniProt protein identifiers, ChEBI chemical structures, and PubMed literature 
    references. Essential for systems biology research, pathway analysis, drug target identification, and understanding disease mechanisms 
    through structured cellular process representation.
  endpoint: https://rdfportal.org/primary/sparql
  base_uri: http://www.reactome.org/
  graphs:
    - http://rdf.ebi.ac.uk/dataset/reactome

shape_expressions: |
  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
  PREFIX bp: <http://www.biopax.org/release/biopax-level3.owl#>
  
  <Pathway> {
    a [ bp:Pathway ] ;
    bp:displayName xsd:string ;
    bp:name xsd:string * ;
    bp:comment xsd:string * ;
    bp:dataSource @<Provenance> ;
    bp:organism @<BioSource> ;
    bp:pathwayComponent IRI * ;                # Can be Pathway, BiochemicalReaction, etc.
    bp:pathwayOrder @<PathwayStep> * ;
    bp:evidence @<Evidence> * ;
    bp:xref @<UnificationXref> *
  }
  
  <BiochemicalReaction> {
    a [ bp:BiochemicalReaction ] ;
    bp:displayName xsd:string ;
    bp:name xsd:string * ;
    bp:comment xsd:string * ;
    bp:dataSource @<Provenance> ;
    bp:left IRI * ;                            # PhysicalEntity instances
    bp:right IRI * ;                           # PhysicalEntity instances
    bp:conversionDirection xsd:string ;        # Always "LEFT-TO-RIGHT" in Reactome
    bp:eCNumber xsd:string * ;
    bp:participantStoichiometry @<Stoichiometry> * ;
    bp:evidence @<Evidence> * ;
    bp:xref @<UnificationXref> *
  }
  
  <Protein> {
    a [ bp:Protein ] ;
    bp:displayName xsd:string ;
    bp:name xsd:string * ;
    bp:comment xsd:string * ;
    bp:dataSource @<Provenance> ;
    bp:entityReference @<ProteinReference> ? ;
    bp:cellularLocation @<CellularLocationVocabulary> ;
    bp:feature @<ModificationFeature> * ;
    bp:memberPhysicalEntity IRI * ;
    bp:xref @<UnificationXref> *
  }
  
  <ProteinReference> {
    a [ bp:ProteinReference ] ;
    bp:name xsd:string + ;
    bp:comment xsd:string * ;
    bp:organism @<BioSource> ? ;
    bp:xref @<UnificationXref> *
  }
  
  <SmallMolecule> {
    a [ bp:SmallMolecule ] ;
    bp:displayName xsd:string ;
    bp:name xsd:string * ;
    bp:comment xsd:string * ;
    bp:dataSource @<Provenance> ;
    bp:entityReference @<SmallMoleculeReference> ? ;
    bp:cellularLocation @<CellularLocationVocabulary> ;
    bp:memberPhysicalEntity IRI * ;
    bp:xref @<UnificationXref> *
  }
  
  <SmallMoleculeReference> {
    a [ bp:SmallMoleculeReference ] ;
    bp:name xsd:string + ;
    bp:xref @<UnificationXref> *
  }
  
  <Complex> {
    a [ bp:Complex ] ;
    bp:displayName xsd:string ;
    bp:name xsd:string * ;
    bp:comment xsd:string * ;
    bp:dataSource @<Provenance> ;
    bp:component IRI + ;                       # PhysicalEntity instances
    bp:componentStoichiometry @<Stoichiometry> * ;
    bp:cellularLocation @<CellularLocationVocabulary> ;
    bp:memberPhysicalEntity IRI * ;
    bp:xref @<UnificationXref> *
  }
  
  <Catalysis> {
    a [ bp:Catalysis ] ;
    bp:dataSource @<Provenance> ;
    bp:comment xsd:string * ;
    bp:controlType xsd:string ;
    bp:controlled IRI ;                        # Usually BiochemicalReaction
    bp:controller IRI ;                        # Usually Protein or Complex
    bp:xref @<UnificationXref> *
  }
  
  <UnificationXref> {
    a [ bp:UnificationXref ] ;
    bp:db xsd:string ;
    bp:id xsd:string ;
    bp:comment xsd:string * ;
    bp:idVersion xsd:string ?
  }
  
  <PublicationXref> {
    a [ bp:PublicationXref ] ;
    bp:db xsd:string ;
    bp:id xsd:string ;
    bp:comment xsd:string *
  }
  
  <BioSource> {
    a [ bp:BioSource ] ;
    bp:name xsd:string + ;
    bp:xref @<UnificationXref> *
  }
  
  <Provenance> {
    a [ bp:Provenance ] ;
    bp:name xsd:string ;
    bp:comment xsd:string
  }
  
  <Evidence> {
    a [ bp:Evidence ] ;
    bp:evidenceCode IRI ;                      # EvidenceCodeVocabulary
    bp:xref @<PublicationXref> *
  }
  
  <PathwayStep> {
    a [ bp:PathwayStep ] ;
    bp:stepProcess IRI ;                       # Pathway or Interaction
    bp:nextStep @<PathwayStep> *
  }
  
  <Stoichiometry> {
    a [ bp:Stoichiometry ] ;
    bp:physicalEntity IRI ;
    bp:stoichiometricCoefficient xsd:float
  }
  
  <CellularLocationVocabulary> {
    a [ bp:CellularLocationVocabulary ] ;
    bp:term xsd:string
  }
  
  <ModificationFeature> {
    a [ bp:ModificationFeature ] ;
    bp:modificationType @<SequenceModificationVocabulary> ;
    bp:featureLocation @<SequenceInterval> ?
  }

sample_rdf_entries:
  - title: Amyloid Fiber Formation Pathway
    description: Key pathway in Alzheimer's disease showing APP processing cascade through BACE1 and gamma-secretase cleavage reactions.
    rdf: |
      <http://www.reactome.org/biopax/65/48887#Pathway1349> a bp:Pathway ;
        bp:displayName "Amyloid fiber formation" ;
        bp:organism <http://www.reactome.org/biopax/65/48887#BioSource1> ;
        bp:dataSource <http://www.reactome.org/biopax/65/48887#Provenance1> ;
        bp:pathwayComponent <http://www.reactome.org/biopax/65/48887#BiochemicalReaction5961> .

  - title: BACE1 Cleavage of APP
    description: Beta-secretase enzymatic cleavage producing amyloid-beta precursors, a critical step in Alzheimer's pathogenesis.
    rdf: |
      <http://www.reactome.org/biopax/65/48887#BiochemicalReaction5961> a bp:BiochemicalReaction ;
        bp:displayName "BACE1 cleaves APP(18-770) to APP(18-671) and APP(672-770)" ;
        bp:dataSource <http://www.reactome.org/biopax/65/48887#Provenance1> ;
        bp:conversionDirection "LEFT-TO-RIGHT" ;
        bp:left <http://www.reactome.org/biopax/65/48887#Protein19433> ;
        bp:right <http://www.reactome.org/biopax/65/48887#Protein19434> .

  - title: APP Protein Entity
    description: Amyloid precursor protein with UniProt cross-reference, demonstrating protein entity structure and external database linkage.
    rdf: |
      <http://www.reactome.org/biopax/65/48887#Protein19433> a bp:Protein ;
        bp:displayName "APP" ;
        bp:name "APP(18-770)" ;
        bp:name "Amyloid beta A4 protein precursor" ;
        bp:dataSource <http://www.reactome.org/biopax/65/48887#Provenance1> ;
        bp:cellularLocation <http://www.reactome.org/biopax/65/48887#CellularLocationVocabulary63> ;
        bp:entityReference <http://www.reactome.org/biopax/65/48887#ProteinReference1239> .
      
      <http://www.reactome.org/biopax/65/48887#CellularLocationVocabulary63> a bp:CellularLocationVocabulary ;
        bp:term "endosome lumen" .
      
      <http://www.reactome.org/biopax/65/48887#ProteinReference1239> a bp:ProteinReference ;
        bp:xref <http://www.reactome.org/biopax/65/48887#UnificationXref10063> .
      
      <http://www.reactome.org/biopax/65/48887#UnificationXref10063> a bp:UnificationXref ;
        bp:db "UniProt" ;
        bp:id "P05067" .

  - title: Acetylcholine Small Molecule
    description: Neurotransmitter molecule with ChEBI cross-reference, relevant to cholinergic dysfunction in Alzheimer's disease.
    rdf: |
      <http://www.reactome.org/biopax/65/48887#SmallMolecule46> a bp:SmallMolecule ;
        bp:displayName "acetylcholine" ;
        bp:dataSource <http://www.reactome.org/biopax/65/48887#Provenance1> ;
        bp:cellularLocation <http://www.reactome.org/biopax/65/48887#CellularLocationVocabulary15> ;
        bp:entityReference <http://www.reactome.org/biopax/65/48887#SmallMoleculeReference23> .
      
      <http://www.reactome.org/biopax/65/48887#CellularLocationVocabulary15> a bp:CellularLocationVocabulary ;
        bp:term "clathrin-sculpted acetylcholine transport vesicle lumen" .
      
      <http://www.reactome.org/biopax/65/48887#SmallMoleculeReference23> a bp:SmallMoleculeReference ;
        bp:xref <http://www.reactome.org/biopax/65/48887#UnificationXref1528> .
      
      <http://www.reactome.org/biopax/65/48887#UnificationXref1528> a bp:UnificationXref ;
        bp:db "ChEBI" ;
        bp:id "CHEBI:15355" .

  - title: Human Organism BioSource
    description: Taxonomic classification for human pathways with NCBI Taxonomy cross-reference for species identification.
    rdf: |
      <http://www.reactome.org/biopax/65/48887#BioSource1> a bp:BioSource ;
        bp:name "Homo sapiens" ;
        bp:xref <http://www.reactome.org/biopax/65/48887#UnificationXref6> .
      
      <http://www.reactome.org/biopax/65/48887#UnificationXref6> a bp:UnificationXref ;
        bp:db "NCBI Taxonomy" ;
        bp:id "9606" .

sparql_query_examples:
  - title: Find Pathways by Name
    description: Search pathways by keyword using case-insensitive filtering, essential for discovering disease-relevant pathways.
    question: Find Alzheimer-related pathways
    complexity: basic
    sparql: |
      PREFIX bp: <http://www.biopax.org/release/biopax-level3.owl#>
      SELECT ?pathway ?name
      FROM <http://rdf.ebi.ac.uk/dataset/reactome>
      WHERE {
        ?pathway a bp:Pathway ;
                 bp:displayName ?name .
        FILTER(CONTAINS(LCASE(?name), "amyloid") || 
               CONTAINS(LCASE(?name), "alzheimer") ||
               CONTAINS(LCASE(?name), "acetylcholine"))
      }
      LIMIT 20

  - title: Get Amyloid Fiber Formation Components
    description: Retrieve all reaction components within amyloid pathway to understand the complete biochemical cascade.
    question: What reactions form amyloid fibers?
    complexity: intermediate
    sparql: |
      PREFIX bp: <http://www.biopax.org/release/biopax-level3.owl#>
      SELECT ?pathway ?component ?compName
      FROM <http://rdf.ebi.ac.uk/dataset/reactome>
      WHERE {
        ?pathway a bp:Pathway ;
                 bp:displayName ?name ;
                 bp:pathwayComponent ?component .
        ?component bp:displayName ?compName .
        FILTER(CONTAINS(LCASE(?name), "amyloid fiber"))
      }
      LIMIT 50

  - title: Find Neurotransmitter Pathways
    description: Get all neurotransmitter-related pathways for studying synaptic signaling and neurodegenerative disease mechanisms.
    question: What neurotransmitter pathways exist?
    complexity: basic
    sparql: |
      PREFIX bp: <http://www.biopax.org/release/biopax-level3.owl#>
      SELECT ?pathway ?name
      FROM <http://rdf.ebi.ac.uk/dataset/reactome>
      WHERE {
        ?pathway a bp:Pathway ;
                 bp:displayName ?name .
        FILTER(CONTAINS(LCASE(?name), "neurotransmitter"))
      }
      LIMIT 30

  - title: Find APP Processing Reactions
    description: Identify reactions involving amyloid precursor protein cleavage by secretases to map drug intervention points.
    question: How is APP processed?
    complexity: intermediate
    sparql: |
      PREFIX bp: <http://www.biopax.org/release/biopax-level3.owl#>
      SELECT ?reaction ?name
      FROM <http://rdf.ebi.ac.uk/dataset/reactome>
      WHERE {
        ?reaction a bp:BiochemicalReaction ;
                  bp:displayName ?name .
        FILTER(CONTAINS(LCASE(?name), "app") || 
               CONTAINS(LCASE(?name), "bace") ||
               CONTAINS(LCASE(?name), "secretase"))
      }
      LIMIT 30

  - title: Count Pathway Components
    description: Analyze pathway complexity by counting reactions per pathway to identify comprehensive vs focused pathways.
    question: Which pathways have most reactions?
    complexity: advanced
    sparql: |
      PREFIX bp: <http://www.biopax.org/release/biopax-level3.owl#>
      SELECT ?pathway ?name (COUNT(?component) as ?count)
      FROM <http://rdf.ebi.ac.uk/dataset/reactome>
      WHERE {
        ?pathway a bp:Pathway ;
                 bp:displayName ?name ;
                 bp:pathwayComponent ?component .
      }
      GROUP BY ?pathway ?name
      ORDER BY DESC(?count)
      LIMIT 20

  - title: Find Enzyme Catalysis Relationships
    description: Retrieve enzyme-catalyzed reactions to identify catalytic proteins controlling biochemical transformations.
    question: Which enzymes catalyze amyloid-related reactions?
    complexity: intermediate
    sparql: |
      PREFIX bp: <http://www.biopax.org/release/biopax-level3.owl#>
      SELECT ?catalysis ?controller ?controllerName ?reaction ?reactionName
      FROM <http://rdf.ebi.ac.uk/dataset/reactome>
      WHERE {
        ?catalysis a bp:Catalysis ;
                   bp:controller ?controller ;
                   bp:controlled ?reaction .
        ?controller bp:displayName ?controllerName .
        ?reaction a bp:BiochemicalReaction ;
                  bp:displayName ?reactionName .
        FILTER(CONTAINS(LCASE(?reactionName), "amyloid") || 
               CONTAINS(LCASE(?reactionName), "app"))
      }
      LIMIT 20

  - title: Explore Protein Participants in Pathways
    description: Find proteins in specific pathways with their roles to understand molecular actors in biological processes.
    question: What proteins are in amyloid pathways?
    complexity: advanced
    sparql: |
      PREFIX bp: <http://www.biopax.org/release/biopax-level3.owl#>
      SELECT DISTINCT ?protein ?proteinName
      FROM <http://rdf.ebi.ac.uk/dataset/reactome>
      WHERE {
        ?pathway a bp:Pathway ;
                 bp:displayName ?pathwayName ;
                 bp:pathwayComponent ?reaction .
        ?reaction bp:left|bp:right ?entity .
        ?entity a bp:Protein ;
                bp:displayName ?proteinName .
        BIND(?entity as ?protein)
        FILTER(CONTAINS(LCASE(?pathwayName), "amyloid"))
      }
      LIMIT 30

cross_references:
  - title: UniProt Protein Cross-References
    description: Link Reactome proteins to UniProt entries for accessing detailed protein sequences, structures, and functional annotations.
    complexity: intermediate
    sparql: |
      PREFIX bp: <http://www.biopax.org/release/biopax-level3.owl#>
      SELECT ?protein ?name ?xrefDB ?xrefID
      FROM <http://rdf.ebi.ac.uk/dataset/reactome>
      WHERE {
        ?protein a bp:Protein ;
                 bp:displayName ?name ;
                 bp:entityReference ?proteinRef .
        ?proteinRef bp:xref ?xref .
        ?xref bp:db ?xrefDB ;
              bp:id ?xrefID .
        FILTER(CONTAINS(?xrefDB, "UniProt"))
      }
      LIMIT 30

  - title: ChEBI Chemical Cross-References
    description: Connect small molecules to ChEBI database for chemical structures, properties, and systematic nomenclature.
    complexity: basic
    sparql: |
      PREFIX bp: <http://www.biopax.org/release/biopax-level3.owl#>
      SELECT ?molecule ?name ?xrefDB ?xrefID
      FROM <http://rdf.ebi.ac.uk/dataset/reactome>
      WHERE {
        ?molecule a bp:SmallMolecule ;
                  bp:displayName ?name ;
                  bp:entityReference ?molRef .
        ?molRef bp:xref ?xref .
        ?xref bp:db ?xrefDB ;
              bp:id ?xrefID .
        FILTER(CONTAINS(?xrefDB, "ChEBI"))
      }
      LIMIT 30

  - title: PubMed Literature References
    description: Find literature citations for pathways to access primary research supporting pathway annotations and experimental evidence.
    complexity: intermediate
    sparql: |
      PREFIX bp: <http://www.biopax.org/release/biopax-level3.owl#>
      SELECT ?pathway ?name ?xrefDB ?xrefID
      FROM <http://rdf.ebi.ac.uk/dataset/reactome>
      WHERE {
        ?pathway a bp:Pathway ;
                 bp:displayName ?name ;
                 bp:evidence ?evidence .
        ?evidence bp:xref ?xref .
        ?xref bp:db ?xrefDB ;
              bp:id ?xrefID .
        FILTER(CONTAINS(?xrefDB, "Pubmed"))
      }
      LIMIT 30

architectural_notes:
  schema_design:
    - BioPAX Level 3 ontology provides standardized pathway representation across biological databases
    - Hierarchical pathway structure with pathwayComponent linking to subpathways and reactions
    - Reaction-centered model with left (substrates) and right (products) participants
    - Physical entities include Protein, SmallMolecule, Complex, DNA, RNA, and PhysicalEntity
    - Catalysis controls reactions via controller (enzyme) and controlled (reaction) relationships
    - All entities reference Provenance for data source tracking
    - entityReference separates physical instances from reference entities (e.g., Protein vs ProteinReference)
  
  performance:
    - CRITICAL: Always use FROM <http://rdf.ebi.ac.uk/dataset/reactome> not http://rdfportal.org/dataset/reactome
    - Text filtering on bp:displayName is case-sensitive - always use LCASE() function
    - Use CONTAINS() rather than = for string matching in FILTER clauses for better flexibility
    - Pathway component traversal queries expensive - use LIMIT 20-50
    - Property path queries (bp:left|bp:right) multiply results - use DISTINCT
    - Cross-reference filtering by bp:db value first improves query speed
    - Organism filtering via bp:organism reduces human-specific result sets by 80-90%
  
  data_integration:
    - UniProt cross-references for protein identification (85% coverage)
    - ChEBI cross-references for chemical compounds (75% coverage)
    - PubMed citations via PublicationXref for literature evidence (80% coverage)
    - NCBI Taxonomy via BioSource for organism classification
    - Reactome IDs in UnificationXref for stable entity identifiers
    - Cross-species orthology enables comparative pathway analysis
  
  data_quality:
    - Manually curated by expert biocurators with peer review
    - Regular quarterly updates from current literature
    - Complete coverage of human pathways with growing cross-species content
    - All reactions have LEFT-TO-RIGHT directionality (no reversible reactions marked)
    - ProteinReference lacks sequence data (sequences stored elsewhere)
    - SmallMoleculeReference lacks chemical formulas and molecular weights

data_statistics:
  total_entities: 1400000
  total_pathways: 22071
  total_reactions: 88464
  total_proteins: 226021
  total_complexes: 101651
  total_small_molecules: 50136
  total_unification_xrefs: 1150531
  total_publication_xrefs: 269782
  organisms_covered: 56
  
  coverage:
    pathways_with_organisms: "100%"
    pathways_with_datasource: "100%"
    pathways_with_components: "~95%"
    pathways_with_comments: "~35%"
    proteins_with_entity_references: "~88%"
    proteins_with_cellular_location: "100%"
    proteins_with_uniprot_xrefs: "~85%"
    small_molecules_with_entity_references: "~91%"
    small_molecules_with_chebi_xrefs: "~75%"
    reactions_with_directionality: "100%"
    reactions_with_ec_numbers: "~65%"
  
  cardinality:
    avg_components_per_pathway: 5.2
    max_components_per_pathway: 150
    avg_pathwayorder_per_pathway: 5.2
    max_pathwayorder_per_pathway: 150
    avg_participants_per_reaction: 3.6
    max_participants_per_reaction: 50
    avg_xrefs_per_protein: 2.0
    max_xrefs_per_protein: 30
    avg_components_per_complex: 2.3
    max_components_per_complex: 50
    avg_features_per_protein: 1.3
    max_features_per_protein: 30
  
  performance_characteristics:
    - "Pathway name searches with LCASE() efficient up to 1000 results"
    - "Component traversal (pathwayComponent) should use LIMIT 50-100 to avoid timeouts"
    - "Property path queries (left|right) can multiply results significantly - always use DISTINCT"
    - "Cross-reference queries filtering by bp:db first improves performance 10x"
    - "Use CONTAINS() rather than = for more flexible string matching in FILTER clauses"
    - "Organism filtering reduces result sets by 80-90% for human-specific queries"
    - "Catalysis queries joining controller and controlled are moderately expensive"
  
  data_quality_notes:
    - "ProteinReference entities do NOT contain amino acid sequences"
    - "SmallMoleculeReference entities do NOT contain chemical formulas or molecular weights"
    - "All reactions have conversionDirection as LEFT-TO-RIGHT (no explicit reversible reactions)"
    - "Cross-reference completeness varies: UniProt ~85%, ChEBI ~75%, PubMed ~80%"
    - "Some entity names contain special characters requiring careful FILTER handling"
    - "memberPhysicalEntity creates generic/specific entity hierarchies (~51% of proteins)"
  
  entity_distribution:
    unification_xrefs: 48%
    sequence_sites: 18%
    publication_xrefs: 11%
    stoichiometry: 11%
    proteins: 9%
    other: 3%
  
  major_databases_referenced:
    reactome_stable_ids: "~100%"
    uniprot: "~85% of proteins"
    chebi: "~75% of small molecules"
    pubmed: "~80% of entities with evidence"
    ncbi_taxonomy: "~99% of biosources"

schema_info:
  title: DDBJ (DNA Data Bank of Japan) RDF Database
  description: >
    DDBJ is one of the three major international nucleotide sequence databases, 
    collaborating with NCBI GenBank and EMBL-ENA as part of the International 
    Nucleotide Sequence Database Collaboration (INSDC). This RDF representation 
    contains comprehensive genomic and nucleotide sequence data including BioProjects,
    BioSamples, sequence features like exons, and associated metadata using FALDO
    for genomic coordinates.
  endpoint: https://rdfportal.org/ddbj/sparql
  base_uri: http://identifiers.org/
  version: "2024"
  graphs:
    - http://rdfportal.org/dataset/ddbj

prefixes:
  rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns#
  rdfs: http://www.w3.org/2000/01/rdf-schema#
  owl: http://www.w3.org/2002/07/owl#
  xsd: http://www.w3.org/2001/XMLSchema#
  dc: http://purl.org/dc/elements/1.1/
  dcterms: http://purl.org/dc/terms/
  skos: http://www.w3.org/2004/02/skos/core#
  ddbj: http://ddbj.nig.ac.jp/ontologies/nucleotide/
  faldo: http://biohackathon.org/resource/faldo#
  sio: http://semanticscience.org/resource/
  obo: http://purl.obolibrary.org/obo/
  prov: http://www.w3.org/ns/prov#
  void: http://rdfs.org/ns/void#
  insdc: http://identifiers.org/insdc/
  bioproject: http://identifiers.org/bioproject/
  biosample: http://identifiers.org/biosample/
  taxonomy: http://identifiers.org/taxonomy/

shape_expressions: |
  # DDBJ Shape Expressions (ShExC syntax)
  
  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
  PREFIX dc: <http://purl.org/dc/elements/1.1/>
  PREFIX dcterms: <http://purl.org/dc/terms/>
  PREFIX ddbj: <http://ddbj.nig.ac.jp/ontologies/nucleotide/>
  PREFIX faldo: <http://biohackathon.org/resource/faldo#>
  PREFIX sio: <http://semanticscience.org/resource/>
  PREFIX taxonomy: <http://identifiers.org/taxonomy/>
  PREFIX obo: <http://purl.obolibrary.org/obo/>
  
  # BioProject - research project metadata
  :BioProject {
    rdf:type [ddbj:BioProject] ;
    rdfs:label xsd:string ;                        # Project ID (e.g., PRJNA562226)
    sio:SIO_000068 ["http://identifiers.org/bioproject"] ;  # Has attribute
  }
  
  # BioSample - biological sample metadata
  :BioSample {
    rdf:type [ddbj:BioSample] ;
    rdfs:label xsd:string ;                        # Sample ID (e.g., SAMN10954015)
    sio:SIO_000068 ["http://identifiers.org/biosample"] ;   # Has attribute
  }
  
  # Exon - coding regions of genes
  :Exon {
    rdf:type [ddbj:Exon] ;
    rdfs:subClassOf [obo:SO_0000147] ;             # Sequence Ontology exon
    faldo:location @:Region ;                      # Genomic location
  }
  
  # Genomic regions using FALDO ontology
  :Region {
    rdf:type [faldo:Region] ;
    faldo:begin @:Position ;                       # Start position
    faldo:end @:Position ;                         # End position
  }
  
  # Precise genomic positions
  :Position {
    rdf:type [faldo:ExactPosition] ;
    rdf:type [faldo:ForwardStrandPosition faldo:ReverseStrandPosition]? ;
    faldo:position xsd:integer ;                   # Coordinate position
    faldo:reference @:Sequence? ;                  # Reference sequence
  }
  
  # Reference sequence information
  :Sequence {
    rdfs:subClassOf [obo:SO_0000001] ;             # Sequence Ontology sequence
    rdfs:seeAlso xsd:anyURI* ;                     # External sequence links
    faldo:location @:Region? ;                     # Full sequence coordinates
    ddbj:location xsd:string? ;                    # Location string (e.g., "1..7767809")
    ddbj:sequence_length xsd:integer? ;            # Sequence length
    ddbj:topology [ddbj:circular ddbj:linear]? ;   # Sequence topology
    obo:RO_0000086 xsd:anyURI? ;                   # Has quality (e.g., chromosome)
    obo:RO_0002162 @:Taxonomy? ;                   # In taxon
  }
  
  # Taxonomic information
  :Taxonomy {
    rdf:type [ddbj:Taxonomy] ;
    rdfs:label xsd:string ;                        # Taxonomy ID
    dcterms:identifier xsd:string ;                # NCBI taxonomy ID
    sio:SIO_000068 ["http://identifiers.org/taxonomy"] ; # Has attribute
  }

sample_rdf_entries:
  - title: BioProject entry
    description: A research project entry with project metadata
    rdf: |
      @prefix ddbj: <http://ddbj.nig.ac.jp/ontologies/nucleotide/> .
      @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
      @prefix sio: <http://semanticscience.org/resource/> .
      
      <http://identifiers.org/bioproject/PRJNA562226>
        a ddbj:BioProject ;
        rdfs:label "PRJNA562226" ;
        sio:SIO_000068 <http://identifiers.org/bioproject> .

  - title: BioSample entry
    description: A biological sample with sample metadata
    rdf: |
      @prefix ddbj: <http://ddbj.nig.ac.jp/ontologies/nucleotide/> .
      @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
      @prefix sio: <http://semanticscience.org/resource/> .
      
      <http://identifiers.org/biosample/SAMN10954015>
        a ddbj:BioSample ;
        rdfs:label "SAMN10954015" ;
        sio:SIO_000068 <http://identifiers.org/biosample> .

  - title: Exon feature with genomic coordinates
    description: An exon feature with precise FALDO-based genomic location
    rdf: |
      @prefix ddbj: <http://ddbj.nig.ac.jp/ontologies/nucleotide/> .
      @prefix faldo: <http://biohackathon.org/resource/faldo#> .
      @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
      @prefix obo: <http://purl.obolibrary.org/obo/> .
      
      <http://identifiers.org/insdc/CP036276.1#feature:1001623-1002915:1:exon>
        a ddbj:Exon ;
        rdfs:subClassOf obo:SO_0000147 ;
        faldo:location <http://identifiers.org/insdc/CP036276.1#region:1001623-1002915:1> .
      
      <http://identifiers.org/insdc/CP036276.1#region:1001623-1002915:1>
        a faldo:Region ;
        faldo:begin <http://identifiers.org/insdc/CP036276.1#position:1001623:1> ;
        faldo:end <http://identifiers.org/insdc/CP036276.1#position:1002915:1> .

  - title: Forward strand position
    description: A precise genomic position on the forward strand
    rdf: |
      @prefix faldo: <http://biohackathon.org/resource/faldo#> .
      @prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
      
      <http://identifiers.org/insdc/CP036276.1#position:1001623:1>
        a faldo:ExactPosition, faldo:ForwardStrandPosition ;
        faldo:position "1001623"^^xsd:integer ;
        faldo:reference <http://identifiers.org/insdc/CP036276.1#sequence> .

  - title: Reference sequence with metadata
    description: A complete reference sequence with topology and taxonomic information
    rdf: |
      @prefix ddbj: <http://ddbj.nig.ac.jp/ontologies/nucleotide/> .
      @prefix faldo: <http://biohackathon.org/resource/faldo#> .
      @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
      @prefix obo: <http://purl.obolibrary.org/obo/> .
      @prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
      
      <http://identifiers.org/insdc/CP036276.1#sequence>
        rdfs:subClassOf obo:SO_0000001 ;
        rdfs:seeAlso <http://getentry.ddbj.nig.ac.jp/getentry/na/CP036276.1?format=fasta> ;
        rdfs:seeAlso <http://www.ebi.ac.uk/ena/data/view/CP036276.1&display=fasta> ;
        rdfs:seeAlso <http://www.ncbi.nlm.nih.gov/nuccore/CP036276.1?report=fasta> ;
        faldo:location <http://identifiers.org/insdc/CP036276.1#region:1-7767809:1> ;
        ddbj:location "1..7767809" ;
        ddbj:sequence_length "7767809"^^xsd:integer ;
        ddbj:topology ddbj:circular ;
        obo:RO_0000086 obo:SO_0000988 ;
        obo:RO_0002162 <http://identifiers.org/taxonomy/2527995> .

  - title: Taxonomy information
    description: Taxonomic classification linked to NCBI taxonomy
    rdf: |
      @prefix ddbj: <http://ddbj.nig.ac.jp/ontologies/nucleotide/> .
      @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
      @prefix dcterms: <http://purl.org/dc/terms/> .
      @prefix sio: <http://semanticscience.org/resource/> .
      
      <http://identifiers.org/taxonomy/2527995>
        a ddbj:Taxonomy ;
        rdfs:label "2527995" ;
        dcterms:identifier "2527995" ;
        sio:SIO_000068 <http://identifiers.org/taxonomy> .

sparql_query_examples:
  project_management:
    - title: List BioProjects
      description: Retrieve all BioProject identifiers
      question: What are all the BioProject identifiers in DDBJ?
      complexity: basic
      sparql: |
        SELECT ?project ?label
        FROM <http://rdfportal.org/dataset/ddbj>
        WHERE {
          ?project a <http://ddbj.nig.ac.jp/ontologies/nucleotide/BioProject> ;
                   <http://www.w3.org/2000/01/rdf-schema#label> ?label .
        }
        LIMIT 100

    - title: Find BioSamples
      description: Retrieve biological sample identifiers
      question: What biological samples are available in DDBJ?
      complexity: basic
      sparql: |
        SELECT ?sample ?label
        FROM <http://rdfportal.org/dataset/ddbj>
        WHERE {
          ?sample a <http://ddbj.nig.ac.jp/ontologies/nucleotide/BioSample> ;
                  <http://www.w3.org/2000/01/rdf-schema#label> ?label .
        }
        LIMIT 100

  genomics:
    - title: Find exons with coordinates
      description: Retrieve exon features with their genomic coordinates
      question: What are the genomic coordinates of exons in specific sequences?
      complexity: intermediate
      sparql: |
        SELECT ?exon ?start ?end
        FROM <http://rdfportal.org/dataset/ddbj>
        WHERE {
          ?exon a <http://ddbj.nig.ac.jp/ontologies/nucleotide/Exon> ;
                <http://biohackathon.org/resource/faldo#location> ?region .
          ?region <http://biohackathon.org/resource/faldo#begin> ?start_pos ;
                  <http://biohackathon.org/resource/faldo#end> ?end_pos .
          ?start_pos <http://biohackathon.org/resource/faldo#position> ?start .
          ?end_pos <http://biohackathon.org/resource/faldo#position> ?end .
        }
        LIMIT 100

    - title: Analyze sequence lengths
      description: Find sequences and their lengths
      question: What are the lengths of sequences in DDBJ?
      complexity: basic
      sparql: |
        SELECT ?sequence ?length ?topology
        FROM <http://rdfportal.org/dataset/ddbj>
        WHERE {
          ?sequence <http://ddbj.nig.ac.jp/ontologies/nucleotide/sequence_length> ?length .
          OPTIONAL { ?sequence <http://ddbj.nig.ac.jp/ontologies/nucleotide/topology> ?topology }
        }
        LIMIT 100

  sequence_analysis:
    - title: Find exons in specific sequence
      description: Retrieve exons located on a specific reference sequence
      question: Which exons are located on sequence CP036276.1?
      complexity: intermediate
      sparql: |
        SELECT ?exon ?start ?end
        FROM <http://rdfportal.org/dataset/ddbj>
        WHERE {
          ?exon a <http://ddbj.nig.ac.jp/ontologies/nucleotide/Exon> ;
                <http://biohackathon.org/resource/faldo#location> ?region .
          ?region <http://biohackathon.org/resource/faldo#begin> ?start_pos ;
                  <http://biohackathon.org/resource/faldo#end> ?end_pos .
          ?start_pos <http://biohackathon.org/resource/faldo#position> ?start ;
                     <http://biohackathon.org/resource/faldo#reference> ?ref .
          ?end_pos <http://biohackathon.org/resource/faldo#position> ?end .
          FILTER(CONTAINS(STR(?ref), "CP036276.1"))
        }
        LIMIT 100

    - title: List entity types
      description: Find different types of entities in DDBJ
      question: What types of biological entities are available?
      complexity: basic
      sparql: |
        SELECT DISTINCT ?type
        FROM <http://rdfportal.org/dataset/ddbj>
        WHERE {
          ?s a ?type .
        }
        LIMIT 20

  taxonomy:
    - title: Find sequences by organism
      description: Retrieve sequences for specific taxonomic groups
      question: What sequences are available for specific organisms?
      complexity: intermediate
      sparql: |
        SELECT ?sequence ?taxon ?tax_id ?length
        FROM <http://rdfportal.org/dataset/ddbj>
        WHERE {
          ?sequence <http://purl.obolibrary.org/obo/RO_0002162> ?taxon ;
                    <http://ddbj.nig.ac.jp/ontologies/nucleotide/sequence_length> ?length .
          ?taxon a <http://ddbj.nig.ac.jp/ontologies/nucleotide/Taxonomy> ;
                 <http://purl.org/dc/terms/identifier> ?tax_id .
        }
        LIMIT 100

    - title: Examine taxonomy entries
      description: List taxonomic classification entries
      question: What taxonomic entries are available?
      complexity: basic
      sparql: |
        SELECT ?taxon ?tax_id
        FROM <http://rdfportal.org/dataset/ddbj>
        WHERE {
          ?taxon a <http://ddbj.nig.ac.jp/ontologies/nucleotide/Taxonomy> ;
                 <http://purl.org/dc/terms/identifier> ?tax_id .
        }
        LIMIT 50

cross_references:
  - title: DDBJ to GenBank links
    description: Cross-references to NCBI GenBank sequences
    complexity: basic
    sparql: |
      SELECT ?sequence ?genbank_link
      FROM <http://rdfportal.org/dataset/ddbj>
      WHERE {
        ?sequence <http://www.w3.org/2000/01/rdf-schema#seeAlso> ?genbank_link .
        FILTER(CONTAINS(STR(?genbank_link), "ncbi.nlm.nih.gov"))
      }
      LIMIT 100

  - title: DDBJ to ENA links
    description: Cross-references to European Nucleotide Archive
    complexity: basic
    sparql: |
      SELECT ?sequence ?ena_link
      FROM <http://rdfportal.org/dataset/ddbj>
      WHERE {
        ?sequence <http://www.w3.org/2000/01/rdf-schema#seeAlso> ?ena_link .
        FILTER(CONTAINS(STR(?ena_link), "ebi.ac.uk"))
      }
      LIMIT 100

  - title: DDBJ native sequence links
    description: Links to DDBJ native sequence retrieval services
    complexity: basic
    sparql: |
      SELECT ?sequence ?ddbj_link
      FROM <http://rdfportal.org/dataset/ddbj>
      WHERE {
        ?sequence <http://www.w3.org/2000/01/rdf-schema#seeAlso> ?ddbj_link .
        FILTER(CONTAINS(STR(?ddbj_link), "ddbj.nig.ac.jp"))
      }
      LIMIT 100

  - title: Taxonomy cross-references
    description: Links to NCBI Taxonomy database
    complexity: basic
    sparql: |
      SELECT ?taxon ?tax_id ?ncbi_taxon_uri
      FROM <http://rdfportal.org/dataset/ddbj>
      WHERE {
        ?taxon a <http://ddbj.nig.ac.jp/ontologies/nucleotide/Taxonomy> ;
               <http://purl.org/dc/terms/identifier> ?tax_id .
        BIND(IRI(CONCAT("https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?id=", ?tax_id)) as ?ncbi_taxon_uri)
      }
      LIMIT 100

  - title: Sequence Ontology cross-references
    description: Links to Sequence Ontology for feature classification
    complexity: intermediate
    sparql: |
      SELECT ?feature ?so_term
      FROM <http://rdfportal.org/dataset/ddbj>
      WHERE {
        ?feature <http://www.w3.org/2000/01/rdf-schema#subClassOf> ?so_term .
        FILTER(CONTAINS(STR(?so_term), "obo/SO_"))
      }
      LIMIT 100

architectural_notes:
  design_patterns:
    - "Uses FALDO ontology for precise genomic coordinate representation with strand information"
    - "Integrates BioProject and BioSample metadata for experimental context"
    - "Links to Sequence Ontology (SO) terms for standardized feature classification"
    - "Provides cross-references to major sequence databases (GenBank, ENA)"
    - "Uses identifiers.org URIs for stable, globally unique identifiers"
    
  performance_considerations:
    - "Complex aggregation queries (COUNT, GROUP BY, ORDER BY) may fail - use simple SELECT queries"
    - "Coordinate-based queries should specify reference sequence to optimize performance"
    - "Feature type filtering leverages class-based indexing for efficient retrieval"
    - "Use LIMIT clauses for all queries due to large dataset size"
    - "Avoid complex OPTIONAL clauses with multiple conditions"
    
  data_integration:
    - "FALDO coordinates enable interoperability with other genomic RDF resources"
    - "Cross-references support integration with GenBank, ENA, and NCBI services"
    - "Sequence Ontology integration provides standardized biological semantics"
    - "Identifier namespace separation supports clear data provenance"

data_statistics:
  total_entities: "~50+ million"
  main_types:
    bioproject: "~100,000+ projects"
    biosample: "~1,000,000+ samples"
    exon: "~20,000,000+ exon features"
    positions: "~40,000,000+ genomic positions"
    regions: "~20,000,000+ genomic regions"
    sequences: "~5,000,000+ reference sequences"
    taxonomy: "~50,000+ taxonomic entries"
  
  coverage:
    organisms: "Wide range of species from bacteria to eukaryotes"
    sequence_types: "Genomic DNA, chromosomes, plasmids, organellar genomes"
    feature_types: "Primarily exon annotations with precise coordinates"
  
  query_optimization_hints:
    - "Use simple SELECT queries without aggregation functions"
    - "Filter by reference sequence for coordinate-based queries"
    - "Use specific feature types in WHERE clauses for better performance"
    - "Leverage taxonomy filters for organism-specific data retrieval"
    - "Position-based queries benefit from coordinate range constraints"
    - "Always include LIMIT clauses to prevent timeouts"
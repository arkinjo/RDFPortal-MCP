schema_info:
  title: BacDive - The Bacterial Diversity Metadatabase
  description: |
    BacDive is a comprehensive database for standardized bacterial and archaeal information covering taxonomy, morphology, physiology, cultivation conditions, and molecular data. It contains over 97,000 bacterial strain records with detailed phenotypic and genotypic characterizations. Major entity types include Strains (core records), Phenotypes (morphology, Gram staining, motility, enzyme activities, oxygen tolerance), CultureConditions (growth media, temperature, pH), Sequences (16S rRNA, genomes), GeographicOrigin (isolation sources, locations), and References (literature, culture collections). The database serves microbiologists, biotechnologists, and ecologists by providing standardized, quality-controlled strain information with extensive cross-references to culture collections and sequence databases.
  endpoint: https://rdfportal.org/primary/sparql
  base_uri: https://purl.dsmz.de/
  graphs:
    - http://rdfportal.org/dataset/bacdive
  version:
    mie_version: "1.1"
    mie_created: "2025-01-21"
    mie_updated: "2025-01-21"
    data_version: "BacDive 2024"
    update_frequency: "Quarterly"
  license:
    data_license: "CC BY 4.0"
    license_url: "https://bacdive.dsmz.de/about"
  access:
    rate_limiting: "100 queries/min"
    max_query_timeout: "60 seconds"

shape_expressions: |
  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
  PREFIX schema: <https://purl.dsmz.de/schema/>
  PREFIX dct: <http://purl.org/dc/terms/>
  
  <StrainShape> {
    a [ schema:Strain ] ;
    rdfs:label xsd:string ;
    rdfs:hasScientificName xsd:string ;
    dct:description xsd:string ? ;
    schema:hasBacDiveID xsd:integer ;
    schema:hasTaxID xsd:integer ;
    schema:hasGenus xsd:string ;
    schema:hasSpecies xsd:string ;
    schema:hasSpeciesEpithet xsd:string ? ;
    schema:hasFamily xsd:string ? ;
    schema:hasOrder xsd:string ? ;
    schema:hasClass xsd:string ? ;
    schema:hasPhylum xsd:string ? ;
    schema:hasDomain xsd:string ? ;
    schema:hasDesignation xsd:string ? ;
    schema:hasStrainNumber xsd:string ? ;
    schema:isTypeStrain xsd:boolean ? ;
    schema:matchesTaxIDLevel xsd:string ? ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <EnzymeShape> {
    a [ schema:Enzyme schema:GeneProduct schema:Protein ] ;
    rdfs:label xsd:string ;
    schema:describesStrain @<StrainShape> ;
    schema:hasActivity xsd:string ;
    schema:hasECNumber xsd:string ? ;
    schema:hasEnzyme xsd:string ? ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <GramStainShape> {
    a [ schema:GramStain schema:CellMorphology schema:MicrobialPhenotype schema:Phenotype ] ;
    rdfs:label xsd:string ? ;
    schema:describesStrain @<StrainShape> ;
    schema:hasGramStain xsd:string ;
    schema:hasPhenotypeInformation xsd:string ? ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <CellMotilityShape> {
    a [ schema:CellMotility schema:MicrobialPhenotype schema:Phenotype ] ;
    schema:describesStrain @<StrainShape> ;
    schema:isMotile xsd:boolean ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <CellShapeShape> {
    a [ schema:CellShape schema:CellMorphology schema:Phenotype ] ;
    rdfs:label xsd:string ;
    schema:describesStrain @<StrainShape> ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <CellSizeShape> {
    a [ schema:CellSize schema:CellMorphology schema:MicrobialPhenotype schema:Phenotype ] ;
    rdfs:label xsd:string ? ;
    schema:describesStrain @<StrainShape> ;
    schema:hasLength xsd:string ? ;
    schema:hasLengthRangeStart xsd:float ? ;
    schema:hasLengthRangeEnd xsd:float ? ;
    schema:hasLengthUnit xsd:string ? ;
    schema:hasWidth xsd:float ? ;
    schema:hasWidthRangeStart xsd:float ? ;
    schema:hasWidthRangeEnd xsd:float ? ;
    schema:hasWidthUnit xsd:string ? ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <OxygenToleranceShape> {
    a [ schema:OxygenTolerance schema:MetabolicPhenotype schema:Phenotype ] ;
    schema:describesStrain @<StrainShape> ;
    schema:hasOxygenTolerance xsd:string ;
    schema:hasGrowthInformation xsd:string ? ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <CultureMediumShape> {
    a [ schema:CultureMedium schema:CultureCondition schema:ConceptualEntity ] ;
    rdfs:label xsd:string ;
    schema:describesStrain @<StrainShape> ;
    schema:hasMediaDiveID xsd:string ? ;
    schema:hasMediaLink IRI ? ;
    schema:hasMediumGrowth xsd:boolean ? ;
    schema:providedBy xsd:string ? ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <CultureTemperatureShape> {
    a [ schema:CultureTemperature schema:CultureCondition schema:ConceptualEntity ] ;
    rdfs:label xsd:string ? ;
    schema:describesStrain @<StrainShape> ;
    schema:hasTemperatureRangeStart xsd:float ? ;
    schema:hasTemperatureRangeEnd xsd:float ? ;
    schema:hasTestType xsd:string ? ;
    schema:growthObserved xsd:string ? ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <CulturePHShape> {
    a [ schema:CulturePH schema:CultureCondition schema:ConceptualEntity ] ;
    rdfs:label xsd:string ? ;
    schema:describesStrain @<StrainShape> ;
    schema:hasPHRangeStart xsd:float ? ;
    schema:hasPHRangeEnd xsd:float ? ;
    schema:hasTestType xsd:string ? ;
    schema:hasTestAbility xsd:string ? ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <Sequence16SShape> {
    a [ schema:16SSequence schema:rRNASequence schema:RNASequence schema:NucleotideSequence ] ;
    rdfs:label xsd:string ;
    schema:describesStrain @<StrainShape> ;
    schema:hasSequenceAccession xsd:string ;
    schema:hasSequenceLength xsd:integer ? ;
    schema:fromSequenceDB xsd:string ;
    schema:hasTaxID xsd:integer ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <GenomeSequenceShape> {
    a [ schema:GenomeSequence schema:DNASequence schema:NucleotideSequence ] ;
    rdfs:label xsd:string ;
    schema:describesStrain @<StrainShape> ;
    schema:hasSequenceAccession xsd:string ;
    schema:fromSequenceDB xsd:string ;
    schema:hasAssemblyLevel xsd:string ? ;
    schema:hasTaxID xsd:integer ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <GCContentShape> {
    a [ schema:GCContent schema:MolecularProperty schema:PropertyOrAttribute ] ;
    rdfs:label xsd:string ? ;
    schema:describesStrain @<StrainShape> ;
    schema:hasGCContentRangeStart xsd:float ? ;
    schema:hasGCContentRangeEnd xsd:float ? ;
    schema:hasGCMethod xsd:string ? ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <CultureCollectionNumberShape> {
    a [ schema:CultureCollectionNumber schema:StrainNumber schema:OrganismIdentifier schema:Identifier ] ;
    rdfs:label xsd:string ;
    schema:describesStrain @<StrainShape> ;
    schema:hasLink IRI ? ;
    schema:hasReference @<ReferenceShape> *
  }
  
  <IsolationShape> {
    a [ schema:IsolationSource schema:IsolationInformation schema:Origin ] ;
    rdfs:label xsd:string ;
    schema:describesStrain @<StrainShape>
  }
  
  <LocationShape> {
    a [ schema:LocationOfOrigin schema:Origin ] ;
    rdfs:label xsd:string ;
    schema:describesStrain @<StrainShape> ;
    schema:hasCountry xsd:string ? ;
    schema:hasLatitude xsd:float ? ;
    schema:hasLongitude xsd:float ? ;
    schema:hasLocation xsd:float ?
  }
  
  <ReferenceShape> {
    a [ schema:Reference ] ;
    dct:creator xsd:string ? ;
    dct:title xsd:string ? ;
    dct:issued xsd:string ? ;
    dct:identifier xsd:string ? ;
    rdfs:seeAlso IRI ? ;
    schema:hasDocumentType xsd:string ? ;
    schema:hasBibliographicInformation xsd:string ? ;
    schema:hasCatalogueID xsd:string ? ;
    schema:hasCatalogueInstitution xsd:string ?
  }

sample_rdf_entries:
  - title: Bacterial Strain with Taxonomic Classification
    description: Core strain entry showing taxonomic hierarchy and identification.
    rdf: |
      strain:1 a schema:Strain ;
        rdfs:label "Acetobacter aceti 1" ;
        dct:description "Acetobacter aceti B 4114 is a mesophilic bacterium of the family Acetobacteraceae." ;
        rdfs:hasScientificName "Acetobacter aceti (Pasteur 1864) Beijerinck 1898" ;
        schema:hasBacDiveID 1 ;
        schema:hasTaxID 435 ;
        schema:hasGenus "Acetobacter" ;
        schema:hasSpecies "Acetobacter aceti" ;
        schema:hasSpeciesEpithet "aceti" ;
        schema:hasFamily "Acetobacteraceae" ;
        schema:hasOrder "Rhizobiales" ;
        schema:hasClass "Alphaproteobacteria" ;
        schema:hasPhylum "Proteobacteria" ;
        schema:hasDomain "Bacteria" ;
        schema:hasDesignation "B 4114" ;
        schema:hasStrainNumber "DSM 2002, NCIB 8554" ;
        schema:isTypeStrain 0 ;
        schema:matchesTaxIDLevel "species" ;
        schema:hasReference reference:950 .
  
  - title: Enzyme Activity Phenotype
    description: Enzyme activity information linked to strain with activity status.
    rdf: |
      enzyme:10 a schema:Enzyme, schema:GeneProduct, schema:Protein ;
        rdfs:label "gelatinase" ;
        schema:describesStrain strain:1290 ;
        schema:hasActivity "+" ;
        schema:hasReference reference:22892 .
  
  - title: 16S rRNA Sequence with External Accession
    description: Ribosomal RNA sequence data with ENA accession and taxonomic link.
    rdf: |
      sequence_16S:JN000316 a schema:16SSequence, schema:rRNASequence, 
                              schema:RNASequence, schema:NucleotideSequence ;
        rdfs:label "Compostimonas suwonensis strain SMC46 16S ribosomal RNA gene, partial sequence" ;
        schema:describesStrain strain:7514 ;
        schema:fromSequenceDB "ena" ;
        schema:hasSequenceAccession "JN000316" ;
        schema:hasSequenceLength 1422 ;
        schema:hasTaxID 1048394 ;
        schema:hasReference reference:18069 .
  
  - title: Culture Collection Cross-Reference
    description: External culture collection identifier with hyperlink to collection database.
    rdf: |
      culture_collection_number:2749 a schema:CultureCollectionNumber, 
                                       schema:StrainNumber, 
                                       schema:OrganismIdentifier, 
                                       schema:Identifier ;
        rdfs:label "DSM 30652" ;
        schema:describesStrain strain:XXX ;
        schema:hasLink <https://www.dsmz.de/collection/catalogue/details/culture/DSM-30652> ;
        schema:hasReference reference:YYY .
  
  - title: Geographic Isolation Information
    description: Location data showing geographic origin with coordinates.
    rdf: |
      location:12345 a schema:LocationOfOrigin, schema:Origin ;
        rdfs:label "Japan" ;
        schema:describesStrain strain:7514 ;
        schema:hasCountry "Japan" ;
        schema:hasLatitude 37.5665 ;
        schema:hasLongitude 126.9780 .

sparql_query_examples:
  - title: Full-Text Search with Boolean Operators (bif:contains)
    description: Advanced keyword search using Virtuoso's bif:contains with AND/OR/NOT operators and relevance scoring.
    question: Find Escherichia coli strains using powerful full-text search.
    complexity: basic
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?strain ?label ?sc
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        ?label bif:contains "'escherichia' AND 'coli'" option (score ?sc) .
      }
      ORDER BY DESC(?sc)
      LIMIT 100
  
  - title: Complex Boolean Search in Descriptions
    description: Search strain descriptions with complex boolean logic (AND, OR, NOT) and relevance ranking.
    question: Find aerobic Gram-negative bacteria excluding plant pathogens.
    complexity: basic
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX dct: <http://purl.org/dc/terms/>
      
      SELECT ?strain ?label ?description ?sc
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        ?strain dct:description ?description .
        ?description bif:contains "'aerobic' AND 'gram-negative'" option (score ?sc) .
      }
      ORDER BY DESC(?sc)
      LIMIT 100
  
  - title: Strains with 16S Sequences
    description: Find strains that have 16S rRNA sequence data with accessions.
    question: Which strains have 16S rRNA sequences available with their accession numbers?
    complexity: intermediate
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?strain ?strainLabel ?seqLabel ?accession ?length
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?strainLabel .
        ?seq a schema:16SSequence .
        ?seq schema:describesStrain ?strain .
        ?seq rdfs:label ?seqLabel .
        ?seq schema:hasSequenceAccession ?accession .
        ?seq schema:hasSequenceLength ?length .
      }
      LIMIT 100
  
  - title: Enzyme Activities by Strain
    description: Retrieve all enzyme activities for strains with positive activity.
    question: What enzymes show positive activity for bacterial strains?
    complexity: intermediate
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?strain ?strainLabel ?enzyme ?enzymeLabel ?activity
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?strainLabel .
        ?enzyme a schema:Enzyme .
        ?enzyme schema:describesStrain ?strain .
        ?enzyme rdfs:label ?enzymeLabel .
        ?enzyme schema:hasActivity ?activity .
        FILTER(?activity = "+")
      }
      LIMIT 100
  
  - title: Combining Full-Text Search with Structured Data
    description: Use bif:contains for keyword filtering combined with structured phenotype queries.
    question: Find thermophilic bacteria with their Gram stain and growth temperature data.
    complexity: intermediate
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX dct: <http://purl.org/dc/terms/>
      
      SELECT ?strain ?label ?description ?gramStain ?tempStart ?tempEnd ?sc
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        ?strain dct:description ?description .
        ?description bif:contains "'thermophilic'" option (score ?sc) .
        
        OPTIONAL {
          ?gs schema:describesStrain ?strain .
          ?gs a schema:GramStain .
          ?gs schema:hasGramStain ?gramStain .
        }
        
        OPTIONAL {
          ?temp a schema:CultureTemperature .
          ?temp schema:describesStrain ?strain .
          ?temp schema:hasTemperatureRangeStart ?tempStart .
          ?temp schema:hasTemperatureRangeEnd ?tempEnd .
        }
      }
      ORDER BY DESC(?sc)
      LIMIT 100
  
  - title: Growth Conditions Profile
    description: Comprehensive query combining culture temperature, pH, and medium information.
    question: What are the optimal growth conditions for Bacillus strains?
    complexity: intermediate
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?strain ?label ?mediumLabel ?tempStart ?tempEnd ?phStart ?phEnd
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        ?strain schema:hasGenus ?genus .
        FILTER(CONTAINS(LCASE(?genus), "bacillus"))
        
        OPTIONAL {
          ?medium a schema:CultureMedium .
          ?medium schema:describesStrain ?strain .
          ?medium rdfs:label ?mediumLabel .
        }
        
        OPTIONAL {
          ?temp a schema:CultureTemperature .
          ?temp schema:describesStrain ?strain .
          ?temp schema:hasTemperatureRangeStart ?tempStart .
          ?temp schema:hasTemperatureRangeEnd ?tempEnd .
        }
        
        OPTIONAL {
          ?ph a schema:CulturePH .
          ?ph schema:describesStrain ?strain .
          ?ph schema:hasPHRangeStart ?phStart .
          ?ph schema:hasPHRangeEnd ?phEnd .
        }
      }
      LIMIT 50
  
  - title: Advanced OR Search with Grouping
    description: Use parentheses to group boolean expressions for complex search logic.
    question: Find either thermophilic or psychrophilic bacteria.
    complexity: advanced
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX dct: <http://purl.org/dc/terms/>
      
      SELECT ?strain ?label ?description ?sc
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        ?strain dct:description ?description .
        ?description bif:contains "'thermophilic' OR 'psychrophilic'" option (score ?sc) .
      }
      ORDER BY DESC(?sc)
      LIMIT 100
  
  - title: Multi-Phenotype Characterization with Keyword Filter
    description: Complex query combining full-text search with multiple structured phenotype queries.
    question: Find human pathogens with complete phenotypic profiles excluding plant pathogens.
    complexity: advanced
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX dct: <http://purl.org/dc/terms/>
      
      SELECT ?strain ?label ?description ?gramStain ?cellShape ?isMotile ?sc
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        ?strain dct:description ?description .
        ?description bif:contains "('pathogen' OR 'pathogenic') AND NOT 'plant'" option (score ?sc) .
        
        OPTIONAL {
          ?gs a schema:GramStain .
          ?gs schema:describesStrain ?strain .
          ?gs schema:hasGramStain ?gramStain .
        }
        
        OPTIONAL {
          ?cs a schema:CellShape .
          ?cs schema:describesStrain ?strain .
          ?cs rdfs:label ?cellShape .
        }
        
        OPTIONAL {
          ?cm a schema:CellMotility .
          ?cm schema:describesStrain ?strain .
          ?cm schema:isMotile ?isMotile .
        }
      }
      ORDER BY DESC(?sc)
      LIMIT 100

cross_references:
  - pattern: schema:hasLink (Culture Collection Numbers)
    description: |
      BacDive strains link to external culture collections through CultureCollectionNumber entities.
      Each culture collection number has a schema:hasLink property pointing to the strain's page
      in the respective culture collection database. This enables direct access to strain 
      information maintained by different institutions worldwide.
    databases:
      German Collections:
        - DSMZ: ">90% strain coverage"
      Japanese Collections:
        - JCM: ~40% strain coverage
        - NBRC: ~35% strain coverage
      Korean Collections:
        - KCTC: ~30% strain coverage
      European Collections:
        - CCUG: ~25% strain coverage
        - CIP: ~20% strain coverage
        - LMG: ~15% strain coverage
        - CECT: ~10% strain coverage
      Chinese Collections:
        - CGMCC: ~20% strain coverage
      Other Collections:
        - BCRC: ~15% strain coverage
        - VTT: ~5% strain coverage
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?strain ?strainLabel ?collectionLabel ?link
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?strainLabel .
        ?ccn a schema:CultureCollectionNumber .
        ?ccn schema:describesStrain ?strain .
        ?ccn rdfs:label ?collectionLabel .
        ?ccn schema:hasLink ?link .
        FILTER(CONTAINS(?link, "dsmz.de"))
      }
      LIMIT 100
  
  - pattern: schema:hasTaxID (NCBI Taxonomy)
    description: |
      All strains and sequences have schema:hasTaxID properties linking to NCBI Taxonomy IDs.
      This provides standardized taxonomic classification and enables integration with other
      genomic databases. The taxID can be at species or strain level depending on
      classification granularity.
    databases:
      Taxonomy:
        - NCBI Taxonomy: 100% strain coverage
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?strain ?label ?taxID ?genus ?species
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        ?strain schema:hasTaxID ?taxID .
        ?strain schema:hasGenus ?genus .
        ?strain schema:hasSpecies ?species .
      }
      LIMIT 100
  
  - pattern: schema:hasSequenceAccession (Sequence Databases)
    description: |
      16S rRNA sequences and genome sequences have schema:hasSequenceAccession properties
      containing accession numbers from ENA (European Nucleotide Archive) or NCBI.
      The schema:fromSequenceDB property indicates the source database ("ena" or "ncbi").
      These accessions enable direct retrieval of sequence data from primary repositories.
    databases:
      Sequence:
        - ENA: ~60% 16S sequences
        - NCBI GenBank: ~40% genome sequences
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?strain ?strainLabel ?accession ?seqDB ?seqType
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?strainLabel .
        
        {
          ?seq a schema:16SSequence .
          ?seq schema:describesStrain ?strain .
          ?seq schema:hasSequenceAccession ?accession .
          ?seq schema:fromSequenceDB ?seqDB .
          BIND("16S" as ?seqType)
        } UNION {
          ?seq a schema:GenomeSequence .
          ?seq schema:describesStrain ?strain .
          ?seq schema:hasSequenceAccession ?accession .
          ?seq schema:fromSequenceDB ?seqDB .
          BIND("Genome" as ?seqType)
        }
      }
      LIMIT 100
  
  - pattern: schema:hasMediaLink (MediaDive)
    description: |
      Culture media reference MediaDive, a companion database for culture medium recipes.
      The schema:hasMediaLink property provides direct URLs to detailed medium compositions
      in MediaDive or other culture collection medium databases.
    databases:
      Media:
        - MediaDive: ~20% culture media
        - CIP Media: ~10% culture media
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?strain ?strainLabel ?mediumLabel ?mediaLink
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?strainLabel .
        ?medium a schema:CultureMedium .
        ?medium schema:describesStrain ?strain .
        ?medium rdfs:label ?mediumLabel .
        ?medium schema:hasMediaLink ?mediaLink .
      }
      LIMIT 100

architectural_notes:
  schema_design:
    - Core hub-and-spoke model with Strain as central entity linked to all phenotypic, genomic, and metadata entities
    - Rich phenotypic characterization through specialized classes (GramStain, CellMotility, Enzyme, etc.) all connecting via schema:describesStrain
    - Temporal and provenance tracking through Reference entities linked to most data points
    - Multiple inheritance for entity types (e.g., Enzyme is also GeneProduct and Protein)
    - Taxonomic information directly embedded in Strain entities with full lineage from domain to species
  
  performance:
    - Queries filtering by genus/species are efficient due to direct strain properties
    - Use bif:contains for powerful full-text keyword search with boolean operators (AND, OR, NOT, parentheses)
    - bif:contains as triple pattern (not in FILTER) with option (score ?var) for relevance scoring
    - Phenotype joins can be slow due to hub-and-spoke structure; use OPTIONAL for missing phenotypes
    - Always use LIMIT to prevent timeouts on large result sets
    - Culture collection links query efficiently when filtered by collection type
    - Sequence queries perform well when restricted to specific strain sets
  
  data_integration:
    - NCBI Taxonomy IDs enable cross-database joins with genomic resources
    - Culture collection numbers provide bidirectional links to strain repositories
    - Sequence accessions (ENA/NCBI) facilitate integration with sequence databases
    - MediaDive links connect to detailed culture medium recipes
    - References include DOIs and institutional links for literature tracking
  
  data_quality:
    - Not all strains have complete phenotypic profiles; use OPTIONAL for comprehensive queries
    - Sequence coverage varies (16S more common than genomes)
    - Culture collection links are most complete for major European and Asian collections
    - Some legacy data may have incomplete taxonomic classification
    - Growth condition data completeness varies by strain source

data_statistics:
  total_strains: 97334
  total_enzymes: 573112
  total_culture_collection_numbers: 149377
  total_16s_sequences: 87045
  total_phenotype_entries: 139873
  total_references: 123819
  coverage:
    strains_with_gram_stain: "~40%"
    strains_with_16s_sequence: "~35%"
    strains_with_culture_collection_links: "~60%"
    strains_with_enzyme_data: "~55%"
  cardinality:
    avg_enzymes_per_strain: 5.9
    avg_culture_collections_per_strain: 1.5
    avg_references_per_strain: 1.3
  performance_characteristics:
    - Simple strain queries (<100 results) complete in <2s
    - Multi-join phenotype queries may take 5-10s
    - bif:contains keyword searches are very fast and support complex boolean logic
    - Statistical aggregations across all strains may timeout; use sampling or specific filters
    - Sequence data queries are efficient when limited to specific taxonomic groups
  data_quality_notes:
    - Type strains generally have more complete phenotypic characterization
    - Recently added strains tend to have genome sequences
    - European strains have better culture collection cross-referencing
    - Some phenotypic data may be qualitative rather than quantitative

anti_patterns:
  - title: Using bif:contains in FILTER Clause
    problem: bif:contains must be used as a triple pattern, not inside FILTER
    wrong_sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX dct: <http://purl.org/dc/terms/>
      PREFIX bif: <http://www.openlinksw.com/schemas/bif#>
      
      SELECT ?strain ?label ?description
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        ?strain dct:description ?description .
        FILTER(bif:contains(?description, "'thermophilic'"))
      }
      LIMIT 100
    correct_sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX dct: <http://purl.org/dc/terms/>
      
      SELECT ?strain ?label ?description ?sc
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        ?strain dct:description ?description .
        ?description bif:contains "'thermophilic'" option (score ?sc) .
      }
      ORDER BY DESC(?sc)
      LIMIT 100
    explanation: Use bif:contains as a triple pattern (?var bif:contains "keywords") not in FILTER; wrap keywords in single quotes
  
  - title: Using Reserved Variable Name ?score
    problem: The variable name ?score conflicts with the score keyword in option clause
    wrong_sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?strain ?label ?score
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        ?label bif:contains "'escherichia'" option (score ?score) .
      }
      ORDER BY DESC(?score)
      LIMIT 10
    correct_sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?strain ?label ?sc
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        ?label bif:contains "'escherichia'" option (score ?sc) .
      }
      ORDER BY DESC(?sc)
      LIMIT 10
    explanation: "Never use ?score as variable name in option (score ...) - use ?sc, ?s, or any other name instead"
  
  - title: Assuming All Strains Have All Phenotypes
    problem: Missing data causes incomplete results when phenotypes are required
    wrong_sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?strain ?label ?gramStain ?motile
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        ?gs schema:describesStrain ?strain .
        ?gs schema:hasGramStain ?gramStain .
        ?cm schema:describesStrain ?strain .
        ?cm schema:isMotile ?motile .
      }
      LIMIT 100
    correct_sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      SELECT ?strain ?label ?gramStain ?motile
      FROM <http://rdfportal.org/dataset/bacdive>
      WHERE {
        ?strain a schema:Strain .
        ?strain rdfs:label ?label .
        
        OPTIONAL {
          ?gs schema:describesStrain ?strain .
          ?gs schema:hasGramStain ?gramStain .
        }
        
        OPTIONAL {
          ?cm schema:describesStrain ?strain .
          ?cm schema:isMotile ?motile .
        }
      }
      LIMIT 100
    explanation: Use OPTIONAL for phenotype properties since not all strains have complete characterization

common_errors:
  - error: "400 Bad Request with bif:contains"
    causes:
      - Using bif:contains inside FILTER clause instead of as a triple pattern
      - Using variable name ?score which conflicts with the score keyword
      - Missing single quotes around keywords in the search string
      - Incorrect syntax for boolean operators
    solutions:
      - Use as triple pattern: ?var bif:contains "'keyword'" option (score ?sc)
      - Never use ?score as variable name; use ?sc, ?s, or another name
      - Always wrap keywords in single quotes: "'keyword'"
      - "Boolean operators syntax: \"'keyword1' AND 'keyword2'\", \"'keyword1' OR 'keyword2'\", \"'keyword1' AND NOT 'keyword2'\""
      - Parentheses for grouping: "('keyword1' OR 'keyword2') AND 'keyword3'"
    example_fix: |
      # Wrong - in FILTER with ?score:
      FILTER(bif:contains(?description, "aerobic"))
      ... option (score ?score) ...
      
      # Correct - as triple pattern with ?sc:
      ?description bif:contains "'aerobic'" option (score ?sc) .
      
      # Wrong - no quotes:
      ?description bif:contains "aerobic" option (score ?sc) .
      
      # Correct - with single quotes:
      ?description bif:contains "'aerobic'" option (score ?sc) .
  
  - error: "Empty results when expecting phenotype data"
    causes:
      - Query assumes all strains have specific phenotypes (Gram stain, motility, etc.)
      - Missing OPTIONAL clauses for incomplete data
      - Filtering on phenotypes that only subset of strains have
    solutions:
      - Always use OPTIONAL for phenotype properties
      - Check data coverage statistics before assuming property presence
      - Use FILTER with BOUND() to explicitly filter for strains with specific data
    example_fix: |
      # Instead of requiring Gram stain:
      ?gs schema:describesStrain ?strain .
      ?gs schema:hasGramStain ?gramStain .
      
      # Use OPTIONAL and filter if needed:
      OPTIONAL {
        ?gs schema:describesStrain ?strain .
        ?gs schema:hasGramStain ?gramStain .
      }
      FILTER(BOUND(?gramStain))
  
  - error: "Query timeout on comprehensive queries"
    causes:
      - Joining too many phenotype types without LIMIT
      - Querying all strains without taxonomic or keyword filters
      - Multiple OPTIONAL clauses on large strain sets
    solutions:
      - Add LIMIT to prevent processing entire database
      - Use bif:contains to filter by keywords first
      - Filter by genus, family, or other taxonomic level to reduce scope
      - Query specific phenotypes separately rather than all at once
      - Use COUNT for statistics rather than retrieving all records
    example_fix: |
      # Add keyword filter to reduce scope:
      ?description bif:contains "'thermophilic'" option (score ?sc) .
      
      # Or add taxonomic filter:
      ?strain schema:hasGenus ?genus .
      FILTER(CONTAINS(LCASE(?genus), "pseudomonas"))
      
      # Or use aggregation for statistics:
      SELECT ?genus (COUNT(DISTINCT ?strain) as ?count)
      WHERE { ... }
      GROUP BY ?genus
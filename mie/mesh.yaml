schema_info:
  title: Medical Subject Headings (MeSH) RDF
  description: |
    National Library of Medicine's controlled vocabulary thesaurus for indexing biomedical literature in PubMed.
    Provides hierarchical medical concepts including descriptors (main subjects), qualifiers (subheadings), supplementary
    chemical and disease records. Organized in tree structure with 16 main categories covering anatomy, organisms, diseases,
    chemicals, techniques, and more. Essential for biomedical information retrieval and literature indexing.
  endpoint: https://rdfportal.org/primary/sparql
  base_uri: http://id.nlm.nih.gov/mesh/
  graphs:
    - http://id.nlm.nih.gov/mesh

shape_expressions: |
  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
  PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
  
  <TopicalDescriptor> {
    a [ meshv:TopicalDescriptor ] ;
    rdfs:label xsd:string ;
    meshv:active xsd:string ;
    meshv:identifier xsd:string ;
    meshv:preferredConcept IRI ? ;
    meshv:preferredTerm IRI ? ;
    meshv:broaderDescriptor IRI * ;
    meshv:treeNumber IRI * ;
    meshv:allowableQualifier IRI * ;
    meshv:concept IRI * ;
    meshv:dateCreated xsd:string ? ;
    meshv:dateEstablished xsd:string ? ;
    meshv:dateRevised xsd:string ? ;
    meshv:seeAlso IRI *
  }
  
  <Term> {
    a [ meshv:Term ] ;
    meshv:active xsd:string ;
    meshv:identifier xsd:string ;
    meshv:prefLabel xsd:string ;
    meshv:lexicalTag xsd:string ;
    meshv:altLabel xsd:string * ;
    meshv:dateCreated xsd:string ? ;
    meshv:thesaurusID xsd:string *
  }
  
  <Concept> {
    a [ meshv:Concept ] ;
    rdfs:label xsd:string ;
    meshv:active xsd:string ;
    meshv:identifier xsd:string ;
    meshv:preferredTerm IRI ;
    meshv:relatedConcept IRI * ;
    meshv:scopeNote xsd:string ?
  }
  
  <TreeNumber> {
    a [ meshv:TreeNumber ] ;
    rdfs:label xsd:string ;
    meshv:active xsd:string ;
    meshv:parentTreeNumber IRI ?
  }
  
  <Qualifier> {
    a [ meshv:Qualifier ] ;
    rdfs:label xsd:string ;
    meshv:active xsd:string ;
    meshv:identifier xsd:string ;
    meshv:annotation xsd:string ? ;
    meshv:concept IRI *
  }
  
  <SCR_Chemical> {
    a [ meshv:SCR_Chemical ] ;
    rdfs:label xsd:string ;
    meshv:active xsd:string ;
    meshv:identifier xsd:string ;
    meshv:preferredMappedTo IRI * ;
    meshv:registryNumber xsd:string * ;
    meshv:note xsd:string ?
  }

sample_rdf_entries:
  - title: Topical Descriptor with Hierarchy
    description: Disease descriptor with tree numbers and allowable qualifiers
    rdf: |
      mesh:D000130 a meshv:TopicalDescriptor ;
        rdfs:label "Achondroplasia" ;
        meshv:active "1" ;
        meshv:identifier "D000130" ;
        meshv:broaderDescriptor mesh:D010009 ;
        meshv:treeNumber mesh:C05.116.099.343.110 ;
        meshv:allowableQualifier mesh:Q000209 ;
        meshv:dateEstablished "1966-01-01" .
  
  - title: Term with Lexical Information
    description: Preferred term showing alternative labels
    rdf: |
      mesh:T000387 a meshv:Term ;
        meshv:active "1" ;
        meshv:identifier "T000387" ;
        meshv:prefLabel "Achondroplasia" ;
        meshv:altLabel "Achondroplasias" ;
        meshv:lexicalTag "NON" ;
        meshv:thesaurusID "NLM (1966)" .
  
  - title: Concept with Scope Note
    description: Semantic concept with detailed medical definition
    rdf: |
      mesh:M0000205 a meshv:Concept ;
        rdfs:label "Achondroplasia" ;
        meshv:active "1" ;
        meshv:identifier "M0000205" ;
        meshv:preferredTerm mesh:T000387 ;
        meshv:scopeNote "An autosomal dominant disorder that is the most frequent form of short-limb dwarfism." .
  
  - title: Hierarchical Tree Number
    description: Tree position showing parent-child relationship
    rdf: |
      mesh:C05.116.099.343.110 a meshv:TreeNumber ;
        rdfs:label "C05.116.099.343.110" ;
        meshv:active "1" ;
        meshv:parentTreeNumber mesh:C05.116.099.343 .
  
  - title: Chemical Supplementary Record
    description: Chemical substance with mapping to descriptor
    rdf: |
      mesh:C008242 a meshv:SCR_Chemical ;
        rdfs:label "lactacyd" ;
        meshv:active "1" ;
        meshv:identifier "C008242" ;
        meshv:preferredMappedTo mesh:D007106 ;
        meshv:note "lactoserum-lactic acid compound soap" .

sparql_query_examples:
  - title: Find Main Descriptors
    description: Retrieve medical subject headings with identifiers
    question: What are MeSH descriptors?
    complexity: basic
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?descriptor ?label ?identifier
      FROM <http://id.nlm.nih.gov/mesh>
      WHERE {
        ?descriptor a meshv:TopicalDescriptor ;
                    rdfs:label ?label ;
                    meshv:identifier ?identifier .
      }
      LIMIT 50
  
  - title: Search by Keyword
    description: Find descriptors containing specific medical terms
    question: Which descriptors relate to diabetes?
    complexity: basic
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?descriptor ?label
      FROM <http://id.nlm.nih.gov/mesh>
      WHERE {
        ?descriptor a meshv:TopicalDescriptor ;
                    rdfs:label ?label .
        FILTER(CONTAINS(LCASE(?label), "diabetes"))
      }
      LIMIT 30
  
  - title: Get Hierarchical Relationships
    description: Find parent-child relationships between descriptors
    question: What is the hierarchy for a concept?
    complexity: intermediate
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?concept ?label ?broader ?broaderLabel
      FROM <http://id.nlm.nih.gov/mesh>
      WHERE {
        ?concept a meshv:TopicalDescriptor ;
                 rdfs:label ?label ;
                 meshv:broaderDescriptor ?broader .
        ?broader rdfs:label ?broaderLabel .
      }
      LIMIT 50
  
  - title: Find Chemical Substances
    description: Retrieve supplementary chemical records
    question: What chemicals are indexed?
    complexity: intermediate
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?chemical ?label ?registryNum
      FROM <http://id.nlm.nih.gov/mesh>
      WHERE {
        ?chemical a meshv:SCR_Chemical ;
                  rdfs:label ?label .
        OPTIONAL { ?chemical meshv:registryNumber ?registryNum }
      }
      LIMIT 50
  
  - title: Explore Tree Categories
    description: Get top-level MeSH tree categories
    question: What are main classification categories?
    complexity: intermediate
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT DISTINCT ?label
      FROM <http://id.nlm.nih.gov/mesh>
      WHERE {
        ?descriptor meshv:treeNumber ?tree .
        ?tree rdfs:label ?label .
        FILTER(REGEX(?label, "^[A-Z][0-9]{2}$"))
      }
      ORDER BY ?label
  
  - title: Get Allowable Qualifiers
    description: Find qualifiers that can modify descriptors
    question: What qualifiers are available?
    complexity: basic
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?qualifier ?label ?annotation
      FROM <http://id.nlm.nih.gov/mesh>
      WHERE {
        ?qualifier a meshv:Qualifier ;
                   rdfs:label ?label .
        OPTIONAL { ?qualifier meshv:annotation ?annotation }
      }
      ORDER BY ?label
  
  - title: Chemical-Descriptor Mappings
    description: Map chemicals to main descriptors
    question: How do chemicals relate to descriptors?
    complexity: advanced
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?chemical ?chemLabel ?descriptor ?descLabel
      FROM <http://id.nlm.nih.gov/mesh>
      WHERE {
        ?chemical a meshv:SCR_Chemical ;
                  rdfs:label ?chemLabel ;
                  meshv:preferredMappedTo ?descriptor .
        ?descriptor rdfs:label ?descLabel .
      }
      LIMIT 50

cross_references:
  - pattern: meshv:thesaurusID
    description: |
      MeSH terms reference external nomenclature systems and databases via the meshv:thesaurusID property.
      This provides cross-references to pharmaceutical nomenclatures, genetic databases, and specialized medical thesauri.
      Total of 916,022 thesaurusID statements across all external sources.
      Filter by prefix pattern to access specific external databases.
    databases:
      pharmaceutical_nomenclatures:
        - FDA SRS (FDA Substance Registration System): ~22,600 references across multiple years (2012-2018)
        - INN (International Nonproprietary Names, WHO): 8,822 drug names
        - USAN (United States Adopted Names): ~3,500 total across multiple years
        - BAN (British Approved Names): 1,093 UK pharmaceutical names
        - JAN (Japanese Accepted Names): 110 Japanese drug names
        - USP (United States Pharmacopeia): 1,138 references
      national_drug_nomenclatures:
        - DE (Germany): 2,114 references
        - US (United States): 1,251 references
        - ES (Spain): 1,049 references
        - FR (France): 860 references
        - CA (Canada): 713 references
        - UK (United Kingdom): 630 references
        - AU (Australia): 596 references
        - NL (Netherlands): 543 references
        - MX (Mexico): 492 references
        - IE (Ireland): 429 references
      genetic_rare_disease:
        - OMIM (Online Mendelian Inheritance in Man): 12,525 genetic disorder references
        - GHR (Genetics Home Reference): 3,778 genetic condition references
        - ORD (Orphan Drug designations): 10,391 rare disease drug references
      medical_research:
        - NIMHD (National Institute on Minority Health): 3,876 references
        - OBSSR (Office of Behavioral and Social Sciences Research): 264+ references
        - IOM (Institute of Medicine): 150 references
      specialized_thesauri:
        - BIOETHICS: 394+ bioethics literature references
        - POPLINE (Population Information): 612+ population health references
      other:
        - UNK (Unknown/uncategorized): 16,918 references
    complexity: basic
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      # Example: Find terms with OMIM (genetic disorder) references
      SELECT ?term ?label ?thesaurusID
      FROM <http://id.nlm.nih.gov/mesh>
      WHERE {
        ?term a meshv:Term ;
              meshv:prefLabel ?label ;
              meshv:thesaurusID ?thesaurusID .
        # Filter by specific database prefix:
        FILTER(REGEX(?thesaurusID, "^OMIM"))      # For OMIM genetic disorders
        # FILTER(REGEX(?thesaurusID, "^FDA SRS"))  # For FDA substances
        # FILTER(REGEX(?thesaurusID, "^INN"))      # For WHO drug names
        # FILTER(REGEX(?thesaurusID, "^USAN"))     # For US drug names
        # FILTER(REGEX(?thesaurusID, "^GHR"))      # For genetic conditions
        # FILTER(REGEX(?thesaurusID, "^ORD"))      # For orphan drugs
      }
      LIMIT 30
  
  - pattern: meshv:thesaurusID (multiple per term)
    description: |
      Many terms have multiple thesaurusID values referencing different external databases simultaneously.
      This is common for pharmaceutical substances that appear in multiple nomenclature systems.
    databases:
      - Multiple nomenclature systems (e.g., same drug in FDA SRS, INN, and USAN)
    complexity: intermediate
    sparql: |
      PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      
      # Find terms with multiple external database references
      SELECT ?term ?label (GROUP_CONCAT(DISTINCT ?thesaurusID; separator="; ") as ?externalRefs)
      FROM <http://id.nlm.nih.gov/mesh>
      WHERE {
        ?term a meshv:Term ;
              meshv:prefLabel ?label ;
              meshv:thesaurusID ?thesaurusID .
        # Filter for pharmaceutical nomenclatures
        FILTER(REGEX(?thesaurusID, "^FDA SRS") || REGEX(?thesaurusID, "^INN") || REGEX(?thesaurusID, "^USAN"))
      }
      GROUP BY ?term ?label
      HAVING(COUNT(DISTINCT ?thesaurusID) > 1)
      LIMIT 30

architectural_notes:
  schema_design:
    - Multi-layered structure with Descriptors, Concepts, and Terms
    - Tree numbers provide hierarchical alphanumeric classification
    - Qualifiers allow precise aspect specification (etiology, therapy, etc.)
    - Supplementary records handle specific substances not warranting full descriptors
  
  performance:
    - Tree queries benefit from regex filtering on specific patterns
    - Use LIMIT clauses for large result sets (2.5M total entities)
    - Mapping queries can be resource-intensive (428K preferredMappedTo)
    - Case-insensitive searches use LCASE() and CONTAINS()
  
  data_integration:
    - MeSH identifiers (D, Q, C prefixes) provide stable cross-references
    - Tree numbers enable hierarchical browsing
    - Qualifier-descriptor combinations support literature indexing
    - Date properties track vocabulary evolution
    - External database links via thesaurusID (916K+ references)
  
  data_quality:
    - Annual updates with new descriptors and revisions
    - Active status field indicates current validity
    - Alternative IDs preserve historical references
    - Scope notes provide detailed medical definitions

data_statistics:
  total_entities: 2456909
  topical_descriptors: 30248
  terms: 869536
  concepts: 466976
  chemicals: 250445
  qualifiers: 84
  
  coverage:
    terms_with_thesaurusID: "<0.1% (but 916K+ total thesaurusID statements)"
    terms_with_altLabel: "~30%"
    descriptors_with_treeNumber: ">95%"
    chemicals_with_preferredMappedTo: "~90%"
  
  cardinality:
    avg_thesaurusID_per_term: 1.05
    max_thesaurusID_per_term: 5
    avg_treeNumbers_per_descriptor: 2.3
    avg_qualifiers_per_descriptor: 20.8
  
  performance_characteristics:
    - "ThesaurusID queries efficient with REGEX prefix filtering"
    - "Tree number queries fast with specific pattern matching"
    - "Recommend LIMIT 30-100 for exploratory queries"
    - "Chemical mapping queries can be resource-intensive"
    - "Case-insensitive FILTER searches work well for labels"
  
  indexed_properties:
    - meshv:identifier
    - rdfs:label
    - meshv:treeNumber
    - meshv:preferredMappedTo
  
  key_relationships:
    preferred_mappings: 428906
    allowable_qualifiers: 628088
    external_thesaurus_refs: 916022

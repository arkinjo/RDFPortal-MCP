schema_info:
  title: MediaDive - Microbial Culture Media Database
  description: |
    Comprehensive RDF database of microbial culture media with detailed composition, growth conditions, and preparation protocols.
    Integrates data from DSMZ (German Collection of Microorganisms and Cell Cultures) providing standardized recipes for cultivating
    bacteria, archaea, fungi, yeast, microalgae, and phages. Includes ingredient specifications with chemical cross-references,
    equipment requirements, operational procedures, and strain-specific growth conditions supporting microbiological research.
  endpoint: https://rdfportal.org/primary/sparql
  base_uri: https://purl.dsmz.de/mediadive/
  graphs:
    - http://rdfportal.org/dataset/mediadive

shape_expressions: |
  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
  PREFIX dct: <http://purl.org/dc/terms/>
  PREFIX schema: <https://purl.dsmz.de/schema/>
  
  <MediumShape> {
    a [ schema:CultureMedium ] ;
    dct:identifier IRI ;
    rdfs:label xsd:string ;
    schema:belongsToGroup xsd:string ;
    schema:fromSource xsd:string ;
    schema:hasLinkToSource IRI ;
    schema:hasFinalPH xsd:string ? ;
    schema:hasMinPH xsd:float ? ;
    schema:hasMaxPH xsd:float ? ;
    schema:hasMainSolution @<SolutionShape> ;
    schema:includesSolution @<SolutionShape> ;
    schema:isComplex xsd:boolean
  }
  
  <MediumCompositionShape> {
    a [ schema:MediumComposition ] ;
    schema:partOfMedium @<MediumShape> ;
    schema:containsIngredient @<IngredientShape> ;
    schema:gramsPerLiter xsd:float ? ;
    schema:mmolPerLiter xsd:float ? ;
    schema:isOptionalIngredient xsd:boolean ;
    schema:modificationDifference xsd:boolean ;
    schema:modifiedBy @<ModificationShape> ?
  }
  
  <IngredientShape> {
    a [ schema:Ingredient ] ;
    dct:identifier xsd:integer ? ;
    rdfs:label xsd:string ? ;
    schema:belongsToGroup xsd:string ? ;
    schema:hasFormula xsd:string ? ;
    schema:hasMass xsd:float ? ;
    schema:hasDensity xsd:float ? ;
    schema:hasCAS xsd:string ? ;                 # CAS Registry Number
    schema:hasChEBI xsd:integer ? ;              # ChEBI ID
    schema:hasPubChem xsd:integer ? ;            # PubChem CID
    schema:hasKEGG xsd:string ? ;                # KEGG Compound ID
    schema:hasMetaCyc xsd:string ? ;
    schema:hasSynonym xsd:string ;
    schema:isComplexCarbonSource xsd:boolean ?
  }
  
  <SolutionShape> {
    a [ schema:Solution ] ;
    dct:identifier xsd:string ;
    rdfs:label xsd:string ;
    schema:hasVolume xsd:string ;
    schema:firstDefinedInMedium IRI ;
    schema:isStockSolution xsd:boolean ?
  }
  
  <SolutionRecipeShape> {
    a [ schema:SolutionRecipe ] ;
    dct:identifier xsd:integer ;
    schema:partOfSolution @<SolutionShape> ;
    schema:includesIngredient @<IngredientShape> ? ;
    schema:ingredientAmount xsd:float ;
    schema:ingredientUnit xsd:string ;
    schema:gramsPerLiter xsd:float ? ;
    schema:mmolPerLiter xsd:float ? ;
    schema:isIngredientOptional xsd:boolean ;
    schema:positionInRecipe xsd:integer
  }
  
  <GrowthShape> {
    a [ schema:GrowthCondition ] ;
    schema:partOfMedium @<MediumShape> ;
    schema:relatedToStrain @<StrainShape> ;
    schema:growthTemperature xsd:integer ;
    schema:growthPH xsd:float ? ;
    schema:hasOxygenRequirement xsd:string ? ;
    schema:incubationPeriod xsd:string ? ;
    schema:hasGrowthIndicator xsd:boolean
  }
  
  <StrainShape> {
    a [ schema:Strain ] ;
    dct:identifier xsd:integer ;
    schema:hasDSMNumber xsd:integer ;
    schema:hasBacDiveID xsd:integer ? ;          # Cross-ref to BacDive
    schema:hasSpecies xsd:string ;
    schema:belongsTaxGroup xsd:string ;
    schema:hasSynonym xsd:string ?
  }
  
  <StepShape> {
    a [ schema:OperationalStep ] ;
    dct:identifier xsd:integer ;
    schema:partOfMedium @<MediumShape> ;
    schema:relatedToSolution @<SolutionShape> ;
    schema:description xsd:string ;
    schema:stepOrder xsd:integer ;
    schema:positionInRecipe xsd:integer ?
  }
  
  <EquipmentShape> {
    a [ schema:Equipment ] ;
    dct:identifier xsd:integer ;
    rdfs:label xsd:string ;
    schema:usedInSolution @<SolutionShape>
  }
  
  <ModificationShape> {
    a [ schema:Modification ] ;
    schema:appliesToMedium @<MediumShape> ;
    schema:appliesToSolution @<SolutionShape> ;
    schema:description xsd:string
  }
  
  <GasShape> {
    a [ schema:GasComponent ] ;
    schema:partOfMedium @<MediumShape> ;
    schema:gasType xsd:string ;
    schema:gasPercentage xsd:float
  }

sample_rdf_entries:
  - title: Culture Medium with Basic Properties
    description: Complete medium entity with pH and group classification
    rdf: |
      mediadive:medium/1118 a schema:CultureMedium ;
        dct:identifier <https://purl.dsmz.de/mediadive/medium/1118> ;
        rdfs:label "MD1-MEDIUM" ;
        schema:belongsToGroup "MD1-MEDIUM" ;
        schema:hasFinalPH "7.0-7.2" ;
        schema:fromSource "DSMZ" ;
        schema:isComplex true .

  - title: Ingredient with Chemical Cross-References
    description: Ingredient entity with multiple database cross-references for chemical identification
    rdf: |
      mediadive:ingredient/234 a schema:Ingredient ;
        rdfs:label "Glucose" ;
        schema:hasFormula "C6H12O6" ;
        schema:hasMass 180.156 ;
        schema:hasCAS "50-99-7" ;
        schema:hasChEBI 17234 ;
        schema:hasPubChem 5793 ;
        schema:hasKEGG "C00031" ;
        schema:belongsToGroup "Carbohydrates" .

  - title: Growth Conditions for Strain
    description: Growth parameters linking medium to specific strain cultivation
    rdf: |
      mediadive:growth/5678 a schema:GrowthCondition ;
        schema:partOfMedium mediadive:medium/1118 ;
        schema:relatedToStrain mediadive:strain/12345 ;
        schema:growthTemperature 37 ;
        schema:growthPH 7.2 ;
        schema:hasOxygenRequirement "aerobic" ;
        schema:incubationPeriod "24-48 hours" ;
        schema:hasGrowthIndicator true .

  - title: Solution Recipe with Ingredient Details
    description: Solution recipe component showing ingredient amounts and units
    rdf: |
      mediadive:solution_recipe/890 a schema:SolutionRecipe ;
        dct:identifier 890 ;
        schema:partOfSolution mediadive:solution/sol123 ;
        schema:includesIngredient mediadive:ingredient/234 ;
        schema:ingredientAmount 10.0 ;
        schema:ingredientUnit "g" ;
        schema:gramsPerLiter 10.0 ;
        schema:isIngredientOptional false ;
        schema:positionInRecipe 1 .

  - title: Strain with Taxonomic Information
    description: Microbial strain entity with DSM number and BacDive cross-reference
    rdf: |
      mediadive:strain/12345 a schema:Strain ;
        dct:identifier 12345 ;
        schema:hasDSMNumber 12345 ;
        schema:hasBacDiveID 167744 ;
        schema:hasSpecies "Desulfotomaculum antarcticum" ;
        schema:belongsTaxGroup "Bacteria" ;
        schema:hasSynonym "IAM 64" .

sparql_query_examples:
  - title: List Available Culture Media
    description: Retrieve culture media with basic properties including pH and group classification
    question: What culture media are available in MediaDive?
    complexity: basic
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?medium ?label ?group ?ph
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?medium a schema:CultureMedium ;
                rdfs:label ?label ;
                schema:belongsToGroup ?group .
        OPTIONAL { ?medium schema:hasFinalPH ?ph }
      }
      ORDER BY ?label
      LIMIT 30

  - title: Search Media by pH Range
    description: Find culture media within specific pH ranges for cultivating pH-sensitive organisms
    question: Which media have pH between 6.5 and 7.5?
    complexity: intermediate
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?medium ?label ?minPH ?maxPH
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?medium a schema:CultureMedium ;
                rdfs:label ?label ;
                schema:hasMinPH ?minPH ;
                schema:hasMaxPH ?maxPH .
        FILTER(?minPH >= 6.5 && ?maxPH <= 7.5)
      }
      ORDER BY ?minPH
      LIMIT 20

  - title: Find Ingredients by Chemical Group
    description: Retrieve ingredients organized by chemical groups for medium formulation
    question: What carbohydrate ingredients are available?
    complexity: basic
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?ingredient ?label ?formula ?mass
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?ingredient a schema:Ingredient ;
                    rdfs:label ?label ;
                    schema:belongsToGroup "Carbohydrates" .
        OPTIONAL { ?ingredient schema:hasFormula ?formula }
        OPTIONAL { ?ingredient schema:hasMass ?mass }
      }
      ORDER BY ?label
      LIMIT 30

  - title: Growth Conditions by Temperature
    description: Find optimal growth temperatures for different strains across media
    question: What are the growth conditions for thermophilic organisms (>45°C)?
    complexity: intermediate
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      SELECT ?medium ?strain ?temp ?ph ?oxygen
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?growth a schema:GrowthCondition ;
                schema:partOfMedium ?medium ;
                schema:relatedToStrain ?strain ;
                schema:growthTemperature ?temp .
        OPTIONAL { ?growth schema:growthPH ?ph }
        OPTIONAL { ?growth schema:hasOxygenRequirement ?oxygen }
        FILTER(?temp > 45)
      }
      ORDER BY DESC(?temp)
      LIMIT 20

  - title: Medium Composition Analysis
    description: Retrieve complete ingredient composition for specific medium
    question: What are the ingredients and their concentrations in a specific medium?
    complexity: intermediate
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?medium ?mediumLabel ?ingredient ?ingredientLabel ?gPerL
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?composition a schema:MediumComposition ;
                    schema:partOfMedium ?medium ;
                    schema:containsIngredient ?ingredient ;
                    schema:gramsPerLiter ?gPerL .
        ?medium rdfs:label ?mediumLabel .
        ?ingredient rdfs:label ?ingredientLabel .
        FILTER(?medium = <https://purl.dsmz.de/mediadive/medium/1118>)
      }
      ORDER BY DESC(?gPerL)

  - title: Ingredient Cross-Reference Integration
    description: Link ingredients to external chemical databases for detailed chemical information
    question: Which ingredients have ChEBI and KEGG cross-references?
    complexity: advanced
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?ingredient ?label ?chebi ?kegg ?pubchem ?cas
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?ingredient a schema:Ingredient ;
                    rdfs:label ?label .
        OPTIONAL { ?ingredient schema:hasChEBI ?chebi }
        OPTIONAL { ?ingredient schema:hasKEGG ?kegg }
        OPTIONAL { ?ingredient schema:hasPubChem ?pubchem }
        OPTIONAL { ?ingredient schema:hasCAS ?cas }
        FILTER(BOUND(?chebi) && BOUND(?kegg))
      }
      ORDER BY ?label
      LIMIT 30

  - title: Strain-Medium Compatibility Matrix
    description: Map strains to their compatible culture media with growth indicators
    question: Which media support growth of specific bacterial strains?
    complexity: advanced
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?strain ?species ?medium ?mediumLabel ?temp ?growthIndicator
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?growth a schema:GrowthCondition ;
                schema:relatedToStrain ?strain ;
                schema:partOfMedium ?medium ;
                schema:growthTemperature ?temp ;
                schema:hasGrowthIndicator ?growthIndicator .
        ?strain schema:hasSpecies ?species .
        ?medium rdfs:label ?mediumLabel .
        FILTER(?growthIndicator = true)
      }
      ORDER BY ?species ?medium
      LIMIT 40

cross_references:
  - title: ChEBI Chemical Entity Links
    description: Connect medium ingredients to ChEBI for detailed chemical information
    complexity: basic
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?ingredient ?label ?chebi ?formula
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?ingredient a schema:Ingredient ;
                    rdfs:label ?label ;
                    schema:hasChEBI ?chebi .
        OPTIONAL { ?ingredient schema:hasFormula ?formula }
      }
      ORDER BY ?label
      LIMIT 30

  - title: BacDive Strain Cross-References
    description: Link MediaDive strains to BacDive for comprehensive phenotypic data
    complexity: basic
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      SELECT ?strain ?dsmNumber ?bacDiveID ?species
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?strain a schema:Strain ;
                schema:hasDSMNumber ?dsmNumber ;
                schema:hasBacDiveID ?bacDiveID ;
                schema:hasSpecies ?species .
      }
      ORDER BY ?dsmNumber
      LIMIT 30

  - title: Multi-Database Chemical Integration
    description: Comprehensive chemical database cross-referencing for ingredients
    complexity: intermediate
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?ingredient ?label ?chebi ?kegg ?pubchem ?cas
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?ingredient a schema:Ingredient ;
                    rdfs:label ?label .
        OPTIONAL { ?ingredient schema:hasChEBI ?chebi }
        OPTIONAL { ?ingredient schema:hasKEGG ?kegg }
        OPTIONAL { ?ingredient schema:hasPubChem ?pubchem }
        OPTIONAL { ?ingredient schema:hasCAS ?cas }
        FILTER(BOUND(?chebi) || BOUND(?kegg) || BOUND(?pubchem) || BOUND(?cas))
      }
      ORDER BY ?label
      LIMIT 50

architectural_notes:
  schema_design:
    - Medium entities serve as central hub connecting compositions, solutions, and growth conditions
    - Hierarchical recipe structure from medium → solution → solution_recipe → ingredient
    - Strain-medium relationships through growth condition entities
    - Detailed operational steps for medium preparation protocols
  
  performance:
    - pH range queries optimized with hasMinPH and hasMaxPH properties
    - Temperature-based filtering efficient on growthTemperature integer property
    - Ingredient searches benefit from belongsToGroup classification
    - Cross-reference queries should filter by specific database types
  
  data_integration:
    - ChEBI integration for chemical entity identification
    - PubChem cross-references for compound structures
    - KEGG links for metabolic pathway context
    - BacDive cross-references for strain phenotypic data
    - CAS Registry Numbers for chemical identification
  
  data_quality:
    - Not all ingredients have complete chemical cross-references
    - pH values may be ranges (strings) or specific min/max values (floats)
    - Optional ingredients marked with isOptionalIngredient boolean
    - Growth indicators may be absent for some strain-medium combinations
    - Solution volumes stored as strings (may include units)

data_statistics:
  total_media: ~1700
  total_ingredients: ~2500
  total_strains: ~3000
  total_solutions: ~4000
  total_growth_conditions: ~8000
  
  indexed_properties:
    - rdfs:label
    - schema:belongsToGroup
    - schema:hasFinalPH
    - schema:growthTemperature
    - schema:hasDSMNumber
    - schema:hasChEBI
  
  ingredient_groups:
    - Carbohydrates
    - Amino Acids
    - Vitamins
    - Salts
    - Trace Elements
schema_info:
  title: MediaDive - Microbial Culture Media Database
  description: |
    Comprehensive RDF database of microbial culture media with detailed composition, growth conditions, and preparation protocols.
    Integrates data from DSMZ (German Collection of Microorganisms and Cell Cultures) providing standardized recipes for cultivating
    bacteria, archaea, fungi, yeast, microalgae, and phages. Includes ingredient specifications with chemical cross-references,
    equipment requirements, operational procedures, and strain-specific growth conditions supporting microbiological research.
  endpoint: https://rdfportal.org/primary/sparql
  base_uri: https://purl.dsmz.de/mediadive/
  graphs:
    - http://rdfportal.org/dataset/mediadive

shape_expressions: |
  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
  PREFIX dct: <http://purl.org/dc/terms/>
  PREFIX schema: <https://purl.dsmz.de/schema/>
  
  <MediumShape> {
    a [ schema:CultureMedium ] ;
    dct:identifier IRI ;
    rdfs:label xsd:string ;
    schema:belongsToGroup xsd:string ;
    schema:fromSource xsd:string ;
    schema:hasLinkToSource IRI ? ;
    schema:hasFinalPH xsd:string ? ;
    schema:hasMinPH xsd:float ? ;
    schema:hasMaxPH xsd:float ? ;
    schema:hasMainSolution @<SolutionShape> ;
    schema:includesSolution @<SolutionShape> ;
    schema:isComplex xsd:boolean ;
    dct:description xsd:string ?
  }
  
  <MediumCompositionShape> {
    a [ schema:MediumComposition ] ;
    schema:partOfMedium @<MediumShape> ;
    schema:containsIngredient @<IngredientShape> ;
    schema:gramsPerLiter xsd:float ? ;
    schema:mmolPerLiter xsd:float ? ;
    schema:isOptionalIngredient xsd:boolean ;
    schema:modificationDifference xsd:boolean ;
    schema:modifiedBy @<ModificationShape> ?
  }
  
  <IngredientShape> {
    a [ schema:Ingredient ] ;
    dct:identifier xsd:integer ? ;
    rdfs:label xsd:string ? ;
    schema:belongsToGroup xsd:string ? ;
    schema:hasFormula xsd:string ? ;
    schema:hasMass xsd:float ? ;
    schema:hasDensity xsd:float ? ;
    schema:hasCAS xsd:string ? ;
    schema:hasChEBI xsd:integer ? ;
    schema:hasPubChem xsd:integer ? ;
    schema:hasKEGG xsd:string ? ;
    schema:hasMetaCyc xsd:string ? ;
    schema:hasGMO IRI ? ;
    schema:hasZVG xsd:integer ? ;
    schema:hasSVGImage xsd:string ? ;
    schema:hasSynonym xsd:string * ;
    schema:isComplexCarbonSource xsd:boolean ?
  }
  
  <SolutionShape> {
    a [ schema:Solution ] ;
    dct:identifier xsd:string ;
    rdfs:label xsd:string ;
    schema:hasVolume xsd:string ;
    schema:firstDefinedInMedium IRI ;
    schema:isStockSolution xsd:boolean ?
  }
  
  <SolutionRecipeShape> {
    a [ schema:SolutionRecipe ] ;
    dct:identifier xsd:integer ;
    schema:partOfSolution @<SolutionShape> ;
    schema:includesIngredient @<IngredientShape> ? ;
    schema:ingredientAmount xsd:float ;
    schema:ingredientUnit xsd:string ;
    schema:gramsPerLiter xsd:float ? ;
    schema:mmolPerLiter xsd:float ? ;
    schema:isIngredientOptional xsd:boolean ;
    schema:positionInRecipe xsd:integer
  }
  
  <GrowthShape> {
    a [ schema:GrowthCondition ] ;
    schema:partOfMedium @<MediumShape> ;
    schema:relatedToStrain @<StrainShape> ;
    schema:growthTemperature xsd:integer ;
    schema:growthPH xsd:float ? ;
    schema:hasOxygenRequirement xsd:string ? ;
    schema:incubationPeriod xsd:string ? ;
    schema:hasGrowthIndicator xsd:boolean
  }
  
  <StrainShape> {
    a [ schema:Strain ] ;
    dct:identifier xsd:integer ;
    schema:hasDSMNumber xsd:integer ;
    schema:hasBacDiveID xsd:integer ? ;
    schema:hasSpecies xsd:string ;
    schema:belongsTaxGroup xsd:string ;
    schema:hasSynonym xsd:string *
  }
  
  <StepShape> {
    a [ schema:OperationalStep ] ;
    dct:identifier xsd:integer ;
    schema:partOfMedium @<MediumShape> ;
    schema:relatedToSolution @<SolutionShape> ;
    schema:description xsd:string ;
    schema:stepOrder xsd:integer ;
    schema:positionInRecipe xsd:integer ?
  }
  
  <EquipmentShape> {
    a [ schema:Equipment ] ;
    dct:identifier xsd:integer ;
    rdfs:label xsd:string ;
    schema:usedInSolution @<SolutionShape>
  }
  
  <ModificationShape> {
    a [ schema:Modification ] ;
    schema:appliesToMedium @<MediumShape> ;
    schema:appliesToSolution @<SolutionShape> ;
    schema:description xsd:string
  }
  
  <ModificationDetailShape> {
    a [ schema:ModificationDetail ] ;
    schema:actionType xsd:string ;
    schema:actionDetails xsd:string ;
    schema:modifiedAmount xsd:float ? ;
    schema:modifiedUnit xsd:string ? ;
    schema:modifiedAttribute xsd:string ? ;
    schema:partOfModification @<ModificationShape> ;
    schema:relatedIngredient @<IngredientShape> ? ;
    schema:relatedSolution @<SolutionShape> ?
  }
  
  <GasShape> {
    a [ schema:GasComponent ] ;
    schema:partOfMedium @<MediumShape> ;
    schema:gasType xsd:string ;
    schema:gasPercentage xsd:float
  }

sample_rdf_entries:
  - title: Culture Medium with Basic Properties
    description: Complete medium entity with pH and group classification
    rdf: |
      mediadive:medium/1118 a schema:CultureMedium ;
        dct:identifier <https://purl.dsmz.de/mediadive/medium/1118> ;
        rdfs:label "MD1-MEDIUM" ;
        schema:belongsToGroup "MD1-MEDIUM" ;
        schema:hasFinalPH "7.0-7.2" ;
        schema:fromSource "DSMZ" ;
        schema:isComplex true .

  - title: Ingredient with Chemical Cross-References
    description: Ingredient entity with multiple database cross-references for chemical identification
    rdf: |
      mediadive:ingredient/234 a schema:Ingredient ;
        rdfs:label "Glucose" ;
        schema:hasFormula "C6H12O6" ;
        schema:hasMass 180.156 ;
        schema:hasCAS "50-99-7" ;
        schema:hasChEBI 17234 ;
        schema:hasPubChem 5793 ;
        schema:hasKEGG "C00031" ;
        schema:hasGMO <http://purl.jp/bio/10/gmo/GMO_001067> ;
        schema:belongsToGroup "Carbohydrates" .

  - title: Growth Conditions for Strain
    description: Growth parameters linking medium to specific strain cultivation
    rdf: |
      mediadive:growth/5678 a schema:GrowthCondition ;
        schema:partOfMedium mediadive:medium/1118 ;
        schema:relatedToStrain mediadive:strain/12345 ;
        schema:growthTemperature 37 ;
        schema:growthPH 7.2 ;
        schema:hasOxygenRequirement "aerobic" ;
        schema:incubationPeriod "24-48 hours" ;
        schema:hasGrowthIndicator true .

  - title: Solution Recipe with Ingredient Details
    description: Solution recipe component showing ingredient amounts and units
    rdf: |
      mediadive:solution_recipe/890 a schema:SolutionRecipe ;
        dct:identifier 890 ;
        schema:partOfSolution mediadive:solution/sol123 ;
        schema:includesIngredient mediadive:ingredient/234 ;
        schema:ingredientAmount 10.0 ;
        schema:ingredientUnit "g" ;
        schema:gramsPerLiter 10.0 ;
        schema:isIngredientOptional false ;
        schema:positionInRecipe 1 .

  - title: Strain with Taxonomic Information
    description: Microbial strain entity with DSM number and BacDive cross-reference
    rdf: |
      mediadive:strain/12345 a schema:Strain ;
        dct:identifier 12345 ;
        schema:hasDSMNumber 12345 ;
        schema:hasBacDiveID 167744 ;
        schema:hasSpecies "Desulfotomaculum antarcticum" ;
        schema:belongsTaxGroup "Bacteria" ;
        schema:hasSynonym "IAM 64" .

sparql_query_examples:
  - title: Search Media by Keyword
    description: Find culture media by filtering labels or descriptions with keywords
    question: Which media contain "Desulfotomaculum" or "anaerobic" in their names?
    complexity: basic
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?medium ?label ?group
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?medium a schema:CultureMedium ;
                rdfs:label ?label ;
                schema:belongsToGroup ?group .
        FILTER(CONTAINS(LCASE(?label), "marine") || CONTAINS(LCASE(?group), "marine"))
      }
      ORDER BY ?label
      LIMIT 30

  - title: Retrieve Functional Annotations for Media
    description: Obtain biological/functional information including pH, complexity, and growth conditions for given medium IDs
    question: What are the functional properties and growth characteristics of specific media?
    complexity: basic
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX dct: <http://purl.org/dc/terms/>
      SELECT ?medium ?label ?group ?ph ?isComplex ?description ?docLink
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        VALUES ?medium { 
          <https://purl.dsmz.de/mediadive/medium/1118>
          <https://purl.dsmz.de/mediadive/medium/141>
        }
        ?medium a schema:CultureMedium ;
                rdfs:label ?label ;
                schema:belongsToGroup ?group ;
                schema:isComplex ?isComplex .
        OPTIONAL { ?medium schema:hasFinalPH ?ph }
        OPTIONAL { ?medium dct:description ?description }
        OPTIONAL { ?medium schema:hasLinkToSource ?docLink }
      }

  - title: Search Media by pH Range
    description: Find culture media within specific pH ranges for cultivating pH-sensitive organisms
    question: Which media have pH between 6.5 and 7.5?
    complexity: intermediate
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?medium ?label ?minPH ?maxPH
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?medium a schema:CultureMedium ;
                rdfs:label ?label ;
                schema:hasMinPH ?minPH ;
                schema:hasMaxPH ?maxPH .
        FILTER(?minPH >= 6.5 && ?maxPH <= 7.5)
      }
      ORDER BY ?minPH
      LIMIT 20

  - title: Growth Conditions by Temperature
    description: Find optimal growth temperatures for different strains across media
    question: What are the growth conditions for thermophilic organisms (>45°C)?
    complexity: intermediate
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      SELECT ?medium ?strain ?temp ?ph ?oxygen
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?growth a schema:GrowthCondition ;
                schema:partOfMedium ?medium ;
                schema:relatedToStrain ?strain ;
                schema:growthTemperature ?temp .
        OPTIONAL { ?growth schema:growthPH ?ph }
        OPTIONAL { ?growth schema:hasOxygenRequirement ?oxygen }
        FILTER(?temp > 45)
      }
      ORDER BY DESC(?temp)
      LIMIT 20

  - title: Medium Composition Analysis
    description: Retrieve complete ingredient composition for specific medium
    question: What are the ingredients and their concentrations in a specific medium?
    complexity: intermediate
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?medium ?mediumLabel ?ingredient ?ingredientLabel ?gPerL
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?composition a schema:MediumComposition ;
                    schema:partOfMedium ?medium ;
                    schema:containsIngredient ?ingredient ;
                    schema:gramsPerLiter ?gPerL .
        ?medium rdfs:label ?mediumLabel .
        ?ingredient rdfs:label ?ingredientLabel .
        FILTER(?medium = <https://purl.dsmz.de/mediadive/medium/1118>)
      }
      ORDER BY DESC(?gPerL)

  - title: Ingredient Cross-Reference Integration
    description: Link ingredients to external chemical databases for detailed chemical information
    question: Which ingredients have ChEBI and KEGG cross-references?
    complexity: advanced
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?ingredient ?label ?chebi ?kegg ?pubchem ?cas
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?ingredient a schema:Ingredient ;
                    rdfs:label ?label .
        OPTIONAL { ?ingredient schema:hasChEBI ?chebi }
        OPTIONAL { ?ingredient schema:hasKEGG ?kegg }
        OPTIONAL { ?ingredient schema:hasPubChem ?pubchem }
        OPTIONAL { ?ingredient schema:hasCAS ?cas }
        FILTER(BOUND(?chebi) && BOUND(?kegg))
      }
      ORDER BY ?label
      LIMIT 30

  - title: Strain-Medium Compatibility Matrix
    description: Map strains to their compatible culture media with growth indicators
    question: Which media support growth of specific bacterial strains?
    complexity: advanced
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?strain ?species ?medium ?mediumLabel ?temp ?growthIndicator
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?growth a schema:GrowthCondition ;
                schema:relatedToStrain ?strain ;
                schema:partOfMedium ?medium ;
                schema:growthTemperature ?temp ;
                schema:hasGrowthIndicator ?growthIndicator .
        ?strain schema:hasSpecies ?species .
        ?medium rdfs:label ?mediumLabel .
        FILTER(?growthIndicator = true)
      }
      ORDER BY ?species ?medium
      LIMIT 40

cross_references:
  - pattern: schema:has[Database] properties (Ingredient cross-references)
    description: |
      Ingredient entities use dedicated properties for each external chemical database.
      Each property follows the pattern schema:has[DatabaseName] with database-specific value types.
      Databases are organized by purpose: chemical identifiers, metabolic/structural databases, and regional registries.
    databases:
      chemical_identifiers:
        - CAS Registry Number (hasCAS): ~39% coverage - string format "XXXXX-XX-X"
        - GMO/Glycome Metabolome Ontology (hasGMO): ~41% coverage (HIGHEST) - IRI format http://purl.jp/bio/10/gmo/GMO_XXXXXX
      metabolic_structural:
        - ChEBI (hasChEBI): ~32% coverage - integer ID
        - PubChem (hasPubChem): ~18% coverage - integer compound ID (CID)
        - KEGG Compound (hasKEGG): ~13% coverage - string ID format "CXXXXX"
        - MetaCyc (hasMetaCyc): ~7% coverage - string ID
      regional_databases:
        - ZVG (hasZVG): ~15% coverage - integer ID (German chemical registry)
      structural_images:
        - SVG Images (hasSVGImage): ~3% coverage - embedded SVG markup for 2D structure diagrams
    complexity: basic
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?ingredient ?label ?cas ?chebi ?pubchem ?kegg ?gmo ?zvg
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?ingredient a schema:Ingredient ;
                    rdfs:label ?label .
        OPTIONAL { ?ingredient schema:hasCAS ?cas }
        OPTIONAL { ?ingredient schema:hasChEBI ?chebi }
        OPTIONAL { ?ingredient schema:hasPubChem ?pubchem }
        OPTIONAL { ?ingredient schema:hasKEGG ?kegg }
        OPTIONAL { ?ingredient schema:hasGMO ?gmo }
        OPTIONAL { ?ingredient schema:hasZVG ?zvg }
        # Filter for ingredients with any cross-reference
        FILTER(BOUND(?cas) || BOUND(?chebi) || BOUND(?pubchem) || BOUND(?kegg) || BOUND(?gmo) || BOUND(?zvg))
      }
      ORDER BY ?label
      LIMIT 50

  - pattern: schema:hasBacDiveID (Strain cross-references)
    description: |
      Strain entities link to BacDive (Bacterial Diversity Database) for comprehensive phenotypic,
      taxonomic, and environmental data. BacDive IDs are integer identifiers.
    databases:
      microbial_phenotype:
        - BacDive: ~73% coverage (33,177 out of 45,685 strains) - integer ID
    complexity: basic
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      SELECT ?strain ?dsmNumber ?bacDiveID ?species ?taxGroup
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?strain a schema:Strain ;
                schema:hasDSMNumber ?dsmNumber ;
                schema:hasBacDiveID ?bacDiveID ;
                schema:hasSpecies ?species ;
                schema:belongsTaxGroup ?taxGroup .
      }
      ORDER BY ?dsmNumber
      LIMIT 30

  - pattern: schema:hasLinkToSource (External documentation)
    description: |
      Culture medium entities link to official DSMZ PDF documentation containing detailed
      preparation protocols, composition tables, and application notes.
    databases:
      documentation:
        - DSMZ Medium PDFs: ~99% coverage (3,258 out of 3,289 media) - URL format https://www.dsmz.de/microorganisms/medium/pdf/DSMZ_Medium[ID].pdf
    complexity: basic
    sparql: |
      PREFIX schema: <https://purl.dsmz.de/schema/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      SELECT ?medium ?label ?pdfLink
      FROM <http://rdfportal.org/dataset/mediadive>
      WHERE {
        ?medium a schema:CultureMedium ;
                rdfs:label ?label ;
                schema:hasLinkToSource ?pdfLink .
      }
      ORDER BY ?label
      LIMIT 30

architectural_notes:
  schema_design:
    - Medium entities serve as central hub connecting compositions, solutions, growth conditions, and operational steps
    - Hierarchical recipe structure from medium → solution → solution_recipe → ingredient
    - Strain-medium relationships through growth condition entities enable cultivation compatibility queries
    - ModificationDetail entities track granular changes to base medium recipes with specific amounts and actions
    - Detailed operational steps provide protocol-level guidance for medium preparation
  
  performance:
    - pH range queries optimized with hasMinPH and hasMaxPH numeric properties
    - Temperature-based filtering efficient on growthTemperature integer property
    - Ingredient searches benefit from belongsToGroup categorical classification
    - Cross-reference queries should filter by specific database property names (hasChEBI, hasPubChem, etc.)
    - Growth condition queries involving multiple strains can return large result sets - use LIMIT
  
  data_integration:
    - GMO provides highest coverage (41%) for ingredient metabolic context
    - CAS Registry Numbers offer standardized chemical identification (39% coverage)
    - ChEBI integration enables ontological reasoning over ingredient classifications
    - BacDive cross-references connect to comprehensive microbial phenotype data (73% strain coverage)
    - DSMZ PDF links provide authoritative source documentation for nearly all media
    - PubChem and KEGG enable integration with metabolic pathway and compound structure databases
  
  data_quality:
    - Not all ingredients have complete chemical cross-references - coverage varies by database
    - pH values stored as both ranges (strings like "7.0-7.2") and separate min/max float values
    - Optional ingredients marked with isOptionalIngredient boolean flag
    - Growth indicators may be absent for some strain-medium combinations
    - Solution volumes stored as strings and may include units inline
    - Some modification amounts show floating-point precision artifacts

data_statistics:
  total_media: 3289
  total_ingredients: 1489
  total_strains: 45685
  total_solutions: 5613
  total_growth_conditions: 68001
  total_medium_compositions: 72184
  total_solution_recipes: 40471
  total_operational_steps: 5958
  total_equipment: 5164
  total_modifications: 2649
  total_modification_details: 3101
  total_gas_components: 1203
  
  coverage:
    ingredients_with_cas: "~39%"
    ingredients_with_chebi: "~32%"
    ingredients_with_pubchem: "~18%"
    ingredients_with_kegg: "~13%"
    ingredients_with_metacyc: "~7%"
    ingredients_with_gmo: "~41%"
    ingredients_with_zvg: "~15%"
    ingredients_with_svg_images: "~3%"
    strains_with_bacdive: "~73%"
    media_with_dsmz_pdf_links: "~99%"
    media_with_ph_ranges: ">95%"
    growth_conditions_with_temperature: ">99%"
  
  cardinality:
    avg_compositions_per_medium: 21.9
    max_compositions_per_medium: 150
    avg_growth_conditions_per_strain: 1.5
    max_growth_conditions_per_strain: 45
    avg_solution_recipes_per_solution: 7.2
    max_solution_recipes_per_solution: 85
  
  performance_characteristics:
    - "Temperature filtering on growthTemperature is efficient for up to 10K results"
    - "pH range queries using hasMinPH/hasMaxPH work well with numeric comparisons"
    - "Ingredient composition queries can return many rows - use specific medium filters"
    - "Cross-reference queries benefit from OPTIONAL patterns for partial coverage"
    - "Strain-medium compatibility queries may return large result sets without FILTER on growthIndicator"
    - "Label-based searches should use CONTAINS or REGEX for partial matching"
  
  data_quality_notes:
    - "pH stored in dual format: string ranges (hasFinalPH) and numeric min/max values"
    - "Volume values in solutions are strings and may include unit notation"
    - "Some floating-point amounts show precision artifacts (e.g., 2.3000000000000003)"
    - "Not all entities have complete cross-reference coverage across databases"
    - "Chemical identifiers (CAS, ChEBI) more complete than metabolic databases (KEGG, MetaCyc)"
